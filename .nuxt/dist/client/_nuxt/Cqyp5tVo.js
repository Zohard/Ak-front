import{u as h}from"./B9jFdIe5.js";import{f as y,H as b,c as s,n as m,a as r,k as n,t as c,o,_ as k}from"./CCeOfYC8.js";/* empty css        */const q={class:"article-card"},I=["src","alt"],v={class:"article-content"},A={class:"article-meta"},$={class:"article-type"},C={key:0,class:"article-rating"},M={class:"article-title"},T={key:0,class:"article-excerpt"},B=["innerHTML"],D={class:"article-footer"},H={class:"article-date"},L={key:0,class:"article-author"},O=y({__name:"ArticleCard",props:{article:{}},setup(d){const a=d,{getArticleImageUrl:g}=h(),p=t=>t?new Date(t).toLocaleDateString("fr-FR"):"",l=b(()=>a.article.anime?{image:a.article.anime.image,title:a.article.anime.titre,type:"anime"}:a.article.manga?{image:a.article.manga.image,title:a.article.manga.titre,type:"manga"}:a.article.idAnime&&a.article.idAnime!==0?{image:a.article.animeImage,title:a.article.animeTitre||"Anime",type:"anime"}:a.article.idManga&&a.article.idManga!==0?{image:a.article.mangaImage,title:a.article.mangaTitre||"Manga",type:"manga"}:{image:null,title:a.article.titre||"Critique",type:"anime"}),_=t=>{t.target.style.display="none"},f=t=>{if(!t)return"";let e=t.replace(/<br\s*\/?>/gi,"<br>");if(e=e.replace(/\[url=([^\]]+)\]([^\[]*)\[\/url\]/gi,'<a href="$1" target="_blank" rel="noopener">$2</a>'),e=e.replace(/\[url\]([^\[]*)\[\/url\]/gi,'<a href="$1" target="_blank" rel="noopener">$1</a>'),e=e.replace(/\[b\]([^\[]*)\[\/b\]/gi,"<strong>$1</strong>"),e=e.replace(/\[i\]([^\[]*)\[\/i\]/gi,"<em>$1</em>"),e=e.replace(/\[quote\]([^\[]*)\[\/quote\]/gi,"<blockquote>$1</blockquote>"),e=e.replace(/\r\n/g,"<br>"),e=e.replace(/\n/g,"<br>"),e.length>300){let i=e.substring(0,300);const u=Math.max(i.lastIndexOf(" "),i.lastIndexOf("."),i.lastIndexOf(","));u>200&&(i=i.substring(0,u)),e=i+"..."}return e};return(t,e)=>(o(),s("div",q,[n(l).image?(o(),s("img",{key:0,src:n(g)(n(l).image||"")||void 0,alt:n(l).title,class:"article-image",loading:"lazy",onError:_},null,40,I)):m("",!0),r("div",v,[r("div",A,[r("span",$,c(n(l).type),1),t.article.notation?(o(),s("span",C," â˜… "+c(t.article.notation)+"/10 ",1)):m("",!0)]),r("h3",M,c(n(l).title),1),t.article.critique?(o(),s("div",T,[r("div",{class:"critique-text",innerHTML:f(t.article.critique)},null,8,B)])):m("",!0),r("div",D,[r("p",H,c(p(t.article.dateCritique||t.article.dateAjout)),1),t.article.username||t.article.membre?.pseudo?(o(),s("p",L," Par "+c(t.article.membre?.pseudo||t.article.username),1)):m("",!0)])])]))}}),V=k(O,[["__scopeId","data-v-823865a5"]]);export{V as default};
