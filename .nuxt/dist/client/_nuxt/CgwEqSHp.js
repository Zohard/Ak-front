import{g as u,q as P,P as i,j as b}from"./Bes98wj2.js";function B(){const r=u(!1),l=u(null),t=P(),n=b(),c=async o=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections`,{params:o,headers:t.getAuthHeaders()})}catch(e){throw l.value="Erreur lors du chargement des collections",console.error("Collections API Error:",e),e}finally{r.value=!1}},d=async o=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/${o}`,{headers:t.getAuthHeaders()})}catch(e){throw l.value="Erreur lors du chargement de la collection",console.error("Collection detail API Error:",e),e}finally{r.value=!1}},h=async o=>{if(!t.isAuthenticated)throw new Error("Authentication required");return c({...o,userId:t.user?.id})},p=async o=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections`,{method:"POST",body:o,headers:t.getAuthHeaders()})}catch(e){throw l.value="Erreur lors de la création de la collection",console.error("Create collection API Error:",e),e}finally{r.value=!1}},v=async(o,e)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/${o}`,{method:"PATCH",body:e,headers:t.getAuthHeaders()})}catch(a){throw l.value="Erreur lors de la mise à jour de la collection",console.error("Update collection API Error:",a),a}finally{r.value=!1}},m=async o=>{r.value=!0,l.value=null;try{await $fetch(`${n.public.apiBase}/api/collections/${o}`,{method:"DELETE",headers:t.getAuthHeaders()})}catch(e){throw l.value="Erreur lors de la suppression de la collection",console.error("Delete collection API Error:",e),e}finally{r.value=!1}},f=async(o,e,a)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/user/${o}/type/${e||1}/animes`,{params:a,headers:t.getAuthHeaders()})}catch(s){throw l.value="Erreur lors du chargement des animes de la collection",console.error("Collection animes API Error:",s),s}finally{r.value=!1}},y=async(o,e,a)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/${o}/animes`,{method:"POST",body:{animeId:e,...a},headers:t.getAuthHeaders()})}catch(s){throw l.value="Erreur lors de l'ajout de l'anime à la collection",console.error("Add anime to collection API Error:",s),s}finally{r.value=!1}},$=async(o,e)=>{r.value=!0,l.value=null;try{await $fetch(`${n.public.apiBase}/api/collections/${o}/animes/${e}`,{method:"DELETE",headers:t.getAuthHeaders()})}catch(a){throw l.value="Erreur lors de la suppression de l'anime de la collection",console.error("Remove anime from collection API Error:",a),a}finally{r.value=!1}},E=async(o,e,a)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/user/${o}/type/${e||1}/mangas`,{params:a,headers:t.getAuthHeaders()})}catch(s){throw l.value="Erreur lors du chargement des mangas de la collection",console.error("Collection mangas API Error:",s),s}finally{r.value=!1}},A=async(o,e,a)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/${o}/mangas`,{method:"POST",body:{mangaId:e,...a},headers:t.getAuthHeaders()})}catch(s){throw l.value="Erreur lors de l'ajout du manga à la collection",console.error("Add manga to collection API Error:",s),s}finally{r.value=!1}},g=async(o,e)=>{r.value=!0,l.value=null;try{await $fetch(`${n.public.apiBase}/api/collections/${o}/mangas/${e}`,{method:"DELETE",headers:t.getAuthHeaders()})}catch(a){throw l.value="Erreur lors de la suppression du manga de la collection",console.error("Remove manga from collection API Error:",a),a}finally{r.value=!1}},w=async(o,e)=>{r.value=!0,l.value=null;try{return await $fetch(`${n.public.apiBase}/api/collections/${o}/items`,{params:e,headers:t.getAuthHeaders()})}catch(a){throw l.value="Erreur lors du chargement des éléments de la collection",console.error("Collection items API Error:",a),a}finally{r.value=!1}},C=async(o,e)=>{r.value=!0,l.value=null;try{await $fetch(`${n.public.apiBase}/api/collections/${o}/items/${e}`,{method:"DELETE",headers:t.getAuthHeaders()})}catch(a){throw l.value="Erreur lors de la suppression de l'élément de la collection",console.error("Remove from collection API Error:",a),a}finally{r.value=!1}};return{loading:i(r),error:i(l),fetchCollections:c,fetchCollectionById:d,fetchMyCollections:h,createCollection:p,updateCollection:v,deleteCollection:m,fetchCollectionAnimes:f,addAnimeToCollection:y,removeAnimeFromCollection:$,fetchCollectionMangas:E,addMangaToCollection:A,removeMangaFromCollection:g,fetchCollectionItems:w,removeFromCollection:C}}export{B as u};
