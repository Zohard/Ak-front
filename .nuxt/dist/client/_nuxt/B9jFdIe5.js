import{j as p}from"./CCeOfYC8.js";function g(){const i=p(),u=(t,s="anime")=>{if(!t)return null;if(t.startsWith("http"))return t.includes("casimages.com")||t.includes("imageshack")||t.includes("hostingpics.net")?t.replace("https://","http://"):t;if(t.includes("casimages.com")||t.includes("imageshack")||t.includes("hostingpics.net"))return t.startsWith("//")?`http:${t}`:`http://${t}`;if(t.startsWith("/api/"))return`${i.public.apiBase}${t}`;const r=t.startsWith("/")?t.slice(1):t;return`${i.public.apiBase}/api/media/serve/${s}/${r}`},o=t=>{if(!t)return null;if(t.startsWith("http"))return t;const s=t.startsWith("/")?t.slice(1):t;return`${i.public.apiBase}/${s}`},a=(t,s)=>t?o(`avatars/${t}`):s?`https://ui-avatars.com/api/?name=User+${s}&background=3b82f6&color=fff&size=128`:"https://ui-avatars.com/api/?name=User&background=6b7280&color=fff&size=128",f=t=>{if(!t)return null;if(t.startsWith("http"))return t;const s=t.match(/webzine\/img\/([^\/\?]+)/);return s&&s[1]?`${i.public.apiBase}/api/webzine/img/${s[1]}`:`/images/${t.startsWith("/")?t.slice(1):t}`},l=(t="anime",s=300,r=400)=>{const c=`
      <svg width="${s}" height="${r}" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="${t==="anime"?"#3b82f6":"#10b981"}"/>
        <text x="50%" y="50%" text-anchor="middle" dy="0.35em" fill="white" font-family="sans-serif" font-size="16">${t==="anime"?"Anime":"Manga"}</text>
      </svg>
    `;return`data:image/svg+xml;base64,${btoa(c)}`};return{getImageUrl:u,getDirectApiUrl:o,getAvatarUrl:a,getArticleImageUrl:f,getPlaceholderImage:l,handleImageError:(t,s,r="anime")=>{const e=t.target,n=e.src;if(n.startsWith("https://")&&(n.includes("casimages.com")||n.includes("imageshack")||n.includes("hostingpics.net"))){const c=n.replace("https://","http://");if(e.dataset.httpTried!=="true"){e.dataset.httpTried="true",e.src=c;return}}s?e.src=s:e.src=l(r,e.width||300,e.height||400),e.style.opacity="0.7"}}}export{g as u};
