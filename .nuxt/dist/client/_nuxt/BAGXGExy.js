import{v as z,j as M,f as Y,g as R,H as C,h as V,Y as G,m as J,c as d,n as x,ac as O,a as r,b as y,r as Q,t as m,k as l,B as E,F as I,l as B,d as X,y as Z,ab as ee,o as c,_ as te}from"./CCeOfYC8.js";const re=()=>{const u=z(),o=M().public.siteUrl||window.location.origin,b=[{name:"Twitter",icon:"fa6-brands:x-twitter",color:"bg-black text-white hover:bg-gray-800",shareUrl:e=>`https://twitter.com/intent/tweet?${new URLSearchParams({text:`${e.title} ${e.text?"- "+e.text:""}`,url:e.url||`${o}${u.fullPath}`,hashtags:"anime,manga,critique,AK9"})}`},{name:"Facebook",icon:"fa6-brands:facebook-f",color:"bg-blue-600 text-white hover:bg-blue-700",shareUrl:e=>`https://www.facebook.com/sharer/sharer.php?${new URLSearchParams({u:e.url||`${o}${u.fullPath}`,quote:`${e.title} ${e.text?"- "+e.text:""}`})}`},{name:"LinkedIn",icon:"fa6-brands:linkedin-in",color:"bg-blue-700 text-white hover:bg-blue-800",shareUrl:e=>`https://www.linkedin.com/sharing/share-offsite/?${new URLSearchParams({url:e.url||`${o}${u.fullPath}`,title:e.title,summary:e.text||"",source:"AK9"})}`},{name:"Reddit",icon:"fa6-brands:reddit-alien",color:"bg-orange-600 text-white hover:bg-orange-700",shareUrl:e=>`https://reddit.com/submit?${new URLSearchParams({url:e.url||`${o}${u.fullPath}`,title:e.title})}`},{name:"Telegram",icon:"fa6-brands:telegram-plane",color:"bg-blue-500 text-white hover:bg-blue-600",shareUrl:e=>`https://t.me/share/url?${new URLSearchParams({url:e.url||`${o}${u.fullPath}`,text:`${e.title} ${e.text?"- "+e.text:""}`})}`},{name:"WhatsApp",icon:"fa6-brands:whatsapp",color:"bg-green-500 text-white hover:bg-green-600",shareUrl:e=>{const t=`${e.title} ${e.text?"- "+e.text:""} ${e.url||`${o}${u.fullPath}`}`;return`https://wa.me/?text=${encodeURIComponent(t)}`}},{name:"Discord",icon:"fa6-brands:discord",color:"bg-indigo-600 text-white hover:bg-indigo-700",shareUrl:e=>{const t=`${e.title} ${e.text?"- "+e.text:""} ${e.url||`${o}${u.fullPath}`}`;return`https://discord.com/channels/@me?text=${encodeURIComponent(t)}`}}],w=async e=>{if(!navigator.share)return!1;try{return await navigator.share({title:e.title,text:e.text,url:e.url||`${o}${u.fullPath}`}),!0}catch(t){return t.name!=="AbortError"&&console.error("Native share failed:",t),!1}},S=(e,t)=>{const a=b.find(h=>h.name.toLowerCase()===e.toLowerCase());if(!a)throw new Error(`Platform ${e} not supported`);return a.shareUrl(t)},P=(e,t="share")=>{const v=(screen.width-600)/2,$=(screen.height-400)/2;window.open(e,`share-${t}`,`width=600,height=400,left=${v},top=${$},resizable=yes,scrollbars=yes`)},k=async e=>{const t=`${e.title} ${e.text?"- "+e.text:""} ${e.url||`${o}${u.fullPath}`}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(t),!0;{const a=document.createElement("textarea");a.value=t,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",document.body.appendChild(a),a.focus(),a.select();const h=document.execCommand("copy");return document.body.removeChild(a),h}}catch(a){return console.error("Copy to clipboard failed:",a),!1}},U=e=>{const t=encodeURIComponent(e.title),a=encodeURIComponent(`${e.text||"Découvrez ce contenu intéressant :"}

${e.url||`${o}${u.fullPath}`}

Partagé depuis AK9`);window.location.href=`mailto:?subject=${t}&body=${a}`},D=async e=>e.image?e.image.startsWith("http")?e.image:`${o}${e.image}`:`${o}/images/default-share.jpg`,j=()=>({twitter:45,facebook:23,linkedin:12,reddit:8,telegram:15,whatsapp:31,discord:6,email:9,copy:67}),L=(e,t)=>{typeof gtag<"u"&&gtag("event","share",{method:e,content_type:"review",content_id:t.url||u.fullPath}),console.log(`Shared to ${e}:`,t.title)};return{platforms:b,shareNative:w,shareUrl:S,openShareWindow:P,shareToClipboard:k,shareViaEmail:U,shareToPlatform:async(e,t)=>{switch(L(e,t),e.toLowerCase()){case"native":await w(t)||await k(t);break;case"clipboard":case"copy":await k(t);break;case"email":U(t);break;default:const h=S(e,t);P(h,e);break}},generateShareImage:D,getShareStats:j,trackShare:L,formatShareText:(e,t)=>{const a=t==="twitter"?280:500;let h=e.title;if(e.text){const v=a-h.length-3;e.text.length<=v?h+=` - ${e.text}`:h+=` - ${e.text.substring(0,v-3)}...`}return h}}},se={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},ae={class:"p-6"},oe={class:"mb-6"},ne={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700"},ie={class:"flex space-x-3"},le={key:0,class:"flex-shrink-0"},ce=["src","alt"],he={class:"flex-1 min-w-0"},de={class:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-2 mb-1"},ue={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-2"},ge={class:"text-xs text-blue-600 dark:text-blue-400 truncate"},me={class:"mb-6"},be={class:"grid grid-cols-2 gap-3"},xe={class:"text-sm font-medium"},fe={class:"grid grid-cols-4 gap-3"},pe=["onClick","title"],ye={class:"text-xs font-medium"},we={key:0,class:"mt-3"},ve={key:0,class:"grid grid-cols-4 gap-3 mt-3"},ke=["onClick","title"],$e={class:"text-xs font-medium"},_e={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Ce={class:"grid grid-cols-3 gap-4 text-center"},Se={class:"font-semibold text-gray-900 dark:text-white"},Pe={class:"text-gray-500 dark:text-gray-400 capitalize"},Ue=Y({__name:"ShareModal",props:{show:{type:Boolean},shareData:{},showStats:{type:Boolean,default:!1}},emits:["close","shared"],setup(u,{emit:N}){const o=u,b=N,{platforms:w,shareToPlatform:S,shareNative:P,shareToClipboard:k,shareViaEmail:U,getShareStats:D}=re(),j=z(),L=M(),f=R(!1),g=R(!1),e=R(null),t=C(()=>L.public.siteUrl||window.location.origin),a=C(()=>o.shareData.url||`${t.value}${j.fullPath}`),h=C(()=>typeof navigator<"u"&&navigator.share),v=C(()=>w.slice(0,g.value?w.length:8)),$=C(()=>g.value?[]:w.slice(8)),_=()=>{b("close"),f.value=!1,g.value=!1},F=s=>{s.target===s.currentTarget&&_()},q=async()=>{try{await P(o.shareData)&&(b("shared","native"),_())}catch(s){console.error("Native share failed:",s)}},W=async()=>{try{await k(o.shareData)&&(f.value=!0,b("shared","clipboard"),setTimeout(()=>{f.value=!1},3e3))}catch(s){console.error("Copy failed:",s)}},H=()=>{U(o.shareData),b("shared","email")},A=async s=>{try{await S(s,o.shareData),b("shared",s.toLowerCase())}catch(n){console.error(`Share to ${s} failed:`,n)}};V(()=>{o.showStats&&(e.value=D())});const K=s=>{s.key==="Escape"&&_()};return V(()=>{document.addEventListener("keydown",K),document.body.style.overflow="hidden"}),G(()=>{document.removeEventListener("keydown",K),document.body.style.overflow=""}),(s,n)=>{const p=Q("Icon");return c(),J(ee,{to:"body"},[s.show?(c(),d("div",{key:0,class:"share-modal fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-75",onClick:F,onKeydown:O(_,["esc"])},[r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",onClick:n[1]||(n[1]=Z(()=>{},["stop"]))},[r("div",se,[n[2]||(n[2]=r("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Partager ",-1)),r("button",{onClick:_,class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Fermer"},[y(p,{name:"heroicons:x-mark",class:"w-5 h-5"})])]),r("div",ae,[r("div",oe,[r("div",ne,[r("div",ie,[s.shareData.image?(c(),d("div",le,[r("img",{src:s.shareData.image,alt:s.shareData.title,class:"w-16 h-16 object-cover rounded-lg"},null,8,ce)])):x("",!0),r("div",he,[r("h4",de,m(s.shareData.title),1),s.shareData.text?(c(),d("p",ue,m(s.shareData.text),1)):x("",!0),r("p",ge,m(l(a)),1)])])])]),r("div",me,[r("div",be,[l(h)?(c(),d("button",{key:0,onClick:q,class:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[y(p,{name:"heroicons:share",class:"w-5 h-5"}),n[3]||(n[3]=r("span",{class:"text-sm font-medium"},"Partager",-1))])):x("",!0),r("button",{onClick:W,class:E(["flex items-center justify-center space-x-2 px-4 py-3 rounded-lg transition-colors",l(f)?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},[y(p,{name:l(f)?"heroicons:check":"heroicons:clipboard",class:"w-5 h-5"},null,8,["name"]),r("span",xe,m(l(f)?"Copié !":"Copier le lien"),1)],2),l(h)?x("",!0):(c(),d("button",{key:1,onClick:H,class:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},[y(p,{name:"heroicons:envelope",class:"w-5 h-5"}),n[4]||(n[4]=r("span",{class:"text-sm font-medium"},"Email",-1))]))])]),r("div",null,[n[5]||(n[5]=r("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"}," Partager sur les réseaux sociaux ",-1)),r("div",fe,[(c(!0),d(I,null,B(l(v),i=>(c(),d("button",{key:i.name,onClick:T=>A(i.name),class:E(["flex flex-col items-center justify-center p-3 rounded-lg transition-all hover:scale-105",i.color]),title:`Partager sur ${i.name}`},[y(p,{name:i.icon,class:"w-6 h-6 mb-1"},null,8,["name"]),r("span",ye,m(i.name),1)],10,pe))),128))]),l($).length>0?(c(),d("div",we,[r("button",{onClick:n[0]||(n[0]=i=>g.value=!l(g)),class:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"},[X(m(l(g)?"Moins d'options":`${l($).length} autres options`)+" ",1),y(p,{name:l(g)?"heroicons:chevron-up":"heroicons:chevron-down",class:"w-4 h-4 inline ml-1"},null,8,["name"])]),l(g)?(c(),d("div",ve,[(c(!0),d(I,null,B(l($),i=>(c(),d("button",{key:i.name,onClick:T=>A(i.name),class:E(["flex flex-col items-center justify-center p-3 rounded-lg transition-all hover:scale-105",i.color]),title:`Partager sur ${i.name}`},[y(p,{name:i.icon,class:"w-6 h-6 mb-1"},null,8,["name"]),r("span",$e,m(i.name),1)],10,ke))),128))])):x("",!0)])):x("",!0)]),s.showStats&&l(e)?(c(),d("div",_e,[n[6]||(n[6]=r("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"}," Statistiques de partage ",-1)),r("div",Ce,[(c(!0),d(I,null,B(l(e),(i,T)=>(c(),d("div",{key:T,class:"text-sm"},[r("div",Se,m(i),1),r("div",Pe,m(T),1)]))),128))])])):x("",!0)])])],32)):x("",!0)])}}}),Te=te(Ue,[["__scopeId","data-v-de494e0d"]]);export{Te as default};
