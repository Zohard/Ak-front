import{f as $,q as V,s as B,g as I,h as R,c as s,a as r,n as m,k as d,b as n,t as c,w as v,d as u,B as j,p as f,v as S,r as y,o as a}from"./Bes98wj2.js";import{u as D}from"./DzvRhcSF.js";const F={class:"group relative bg-surface rounded-xl overflow-hidden shadow-card hover:shadow-card-hover transition-all duration-300 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:transform-none"},T={class:"relative"},K={class:"aspect-[20/21] overflow-hidden"},q=["src","alt"],L={key:1,class:"w-full h-full bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900 dark:to-primary-800 flex items-center justify-center"},M={key:0,class:"absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1"},P={key:1,class:"absolute top-3 left-3 bg-primary-600/90 backdrop-blur-sm text-white px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide"},G={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 motion-reduce:transition-none flex items-center justify-center"},H={class:"p-4 space-y-3"},J={class:"font-semibold text-lg text-text line-clamp-2 leading-tight"},O={class:"flex items-center gap-3 text-sm text-text-secondary"},Q={key:0,class:"flex items-center gap-1"},W={key:1,class:"flex items-center gap-1"},X={key:0,class:"text-sm text-text-secondary line-clamp-3 leading-relaxed"},Y={class:"flex items-center justify-between pt-2 border-t border-border"},Z={class:"flex items-center gap-1"},re=$({__name:"AnimeCard",props:{anime:{}},emits:["view"],setup(b,{emit:x}){const i=b,w=x,p=V(),{getImageUrl:_}=D(),k=B(),l=I(!1),z=e=>(e/10).toFixed(1),g=e=>`/anime/${e.niceUrl||C(e.titre)}-${e.id}`,C=e=>e.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[ç]/g,"c").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),E=async()=>{console.log("View button clicked for anime:",i.anime);const e=g(i.anime);console.log("Navigating to:",e);try{await f(e),console.log("Navigation completed")}catch(t){console.error("Navigation error:",t);try{await k.push(e),console.log("Router.push completed")}catch(o){console.error("Router.push error:",o),window.location.href=e}}w("view",i.anime)},N=e=>{const t=e.target;t.style.display="none"},A=async()=>{if(!p.isAuthenticated){f("/login?redirect="+encodeURIComponent(S().fullPath));return}try{l.value=!l.value}catch(e){console.error("Error toggling favorite:",e)}},U=async()=>{const e=`${window.location.origin}${g(i.anime)}`,t=`Découvrez ${i.anime.titre} sur Anime-Kun`;if(navigator.share)try{await navigator.share({title:t,text:i.anime.synopsis||"Découvrez cet anime sur Anime-Kun",url:e})}catch{}else try{await navigator.clipboard.writeText(e)}catch(o){console.error("Error copying to clipboard:",o)}};return R(async()=>{p.isAuthenticated}),(e,t)=>{const o=y("Icon"),h=y("Button");return a(),s("div",F,[r("div",T,[r("div",K,[e.anime.image?(a(),s("img",{key:0,src:d(_)(e.anime.image,"anime"),alt:e.anime.titre,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 motion-reduce:transition-none motion-reduce:transform-none",loading:"lazy",onError:N},null,40,q)):(a(),s("div",L,[n(o,{name:"heroicons:film",size:"xl",class:"text-primary-500 dark:text-primary-400"})]))]),e.anime.moyenneNotes?(a(),s("div",M,[n(o,{name:"heroicons:star",variant:"solid",size:"xs",class:"text-yellow-400"}),r("span",null,c(z(e.anime.moyenneNotes)),1)])):m("",!0),e.anime.genre?(a(),s("div",P,c(e.anime.genre),1)):m("",!0)]),r("div",G,[n(h,{variant:"secondary",size:"lg",rounded:"",onClick:E,class:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 bg-white/90 backdrop-blur-sm text-gray-900 hover:bg-white px-6"},{default:v(()=>[n(o,{name:"heroicons:eye",size:"sm",class:"mr-2"}),t[1]||(t[1]=u(" Voir les détails ",-1))]),_:1,__:[1]})]),r("div",H,[r("h3",J,c(e.anime.titre),1),r("div",O,[e.anime.annee?(a(),s("span",Q,[n(o,{name:"heroicons:calendar",size:"xs"}),u(" "+c(e.anime.annee),1)])):m("",!0),e.anime.nbEp?(a(),s("span",W,[n(o,{name:"episode",size:"xs"}),u(" "+c(e.anime.nbEp)+" ép. ",1)])):m("",!0)]),e.anime.synopsis?(a(),s("p",X,c(e.anime.synopsis),1)):m("",!0),r("div",Y,[n(h,{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=ee=>e.$emit("view",e.anime)),"icon-right":"heroicons:arrow-right",class:"text-primary-600 hover:text-primary-700"},{default:v(()=>t[2]||(t[2]=[u(" En savoir plus ",-1)])),_:1,__:[2]}),r("div",Z,[r("button",{onClick:A,class:j(["p-2 rounded-full hover:bg-surface-hover transition-colors duration-200",{"text-red-500":d(l),"text-text-muted hover:text-text":!d(l)}])},[n(o,{name:(d(l),"heroicons:heart"),variant:d(l)?"solid":"outline",size:"sm"},null,8,["name","variant"])],2),r("button",{onClick:U,class:"p-2 rounded-full hover:bg-surface-hover text-text-muted hover:text-text transition-colors duration-200"},[n(o,{name:"heroicons:share",size:"sm"})])])])])])}}});export{re as default};
