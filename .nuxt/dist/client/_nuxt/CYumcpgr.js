import{f as B,u as E,q as j,s as D,I as K,x as V,g as _,H as q,c as l,a as t,d as u,b as m,w as k,y as Z,n as c,z as w,A,k as s,B as p,t as i,C as z,F as $,l as H,D as R,m as J,e as O,r as G,p as L,o as d,_ as Q}from"./CCeOfYC8.js";import{_ as W}from"./anZNCGfT.js";const X={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},Y={class:"max-w-md w-full space-y-8"},ee={class:"mx-auto h-12 w-12 flex items-center justify-center"},te={class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400"},se={class:"space-y-4"},re={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},oe={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ae={class:"relative"},ne=["type"],de={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},le={class:"mt-2"},ie={class:"flex space-x-1"},ue={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},me={class:"relative"},ce=["type"],pe={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},fe={class:"flex items-start"},xe={class:"flex items-center h-5"},we={class:"ml-3 text-sm"},be={for:"terms",class:"text-gray-700 dark:text-gray-300"},ge={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ye={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-4"},ve={class:"flex"},_e={class:"flex-shrink-0"},he={class:"ml-3"},ke={class:"mt-2 text-sm text-red-700 dark:text-red-300"},Pe=["disabled"],Ce={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Te={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},Ve=B({__name:"register",async setup(qe){let P,C;E({title:"Inscription - Anime-Kun V2",meta:[{name:"description",content:"Créez votre compte Anime-Kun pour rejoindre la communauté"}]});const T=j();D(),T.isAuthenticated&&([P,C]=K(()=>L("/")),await P,C());const r=V({email:"",pseudo:"",password:"",confirmPassword:"",acceptTerms:!1}),b=_(!1),g=_(!1),f=_(!1),y=_(""),o=V({email:"",pseudo:"",password:"",confirmPassword:"",acceptTerms:""}),x=q(()=>{const a=r.password;let e=0;return a.length>=8&&e++,/[a-z]/.test(a)&&e++,/[A-Z]/.test(a)&&e++,/[0-9]/.test(a)&&e++,/[^A-Za-z0-9]/.test(a)&&e++,Math.min(e,4)}),M=a=>{if(a<=x.value)switch(x.value){case 1:return"bg-red-500";case 2:return"bg-orange-500";case 3:return"bg-yellow-500";case 4:return"bg-green-500";default:return"bg-gray-200 dark:bg-gray-700"}return"bg-gray-200 dark:bg-gray-700"},S=()=>{switch(x.value){case 0:return"Entrez un mot de passe";case 1:return"Très faible";case 2:return"Faible";case 3:return"Moyen";case 4:return"Fort";default:return""}},F=q(()=>r.email&&r.pseudo&&r.password&&r.confirmPassword&&r.acceptTerms&&r.password===r.confirmPassword&&x.value>=2),I=()=>{o.email="",o.pseudo="",o.password="",o.confirmPassword="",o.acceptTerms="";let a=!0;return r.email?r.email.includes("@")||(o.email="Adresse email invalide",a=!1):(o.email="L'adresse email est requise",a=!1),r.pseudo?r.pseudo.length<3?(o.pseudo="Le nom d'utilisateur doit contenir au moins 3 caractères",a=!1):r.pseudo.length>20?(o.pseudo="Le nom d'utilisateur ne peut pas dépasser 20 caractères",a=!1):/^[a-zA-Z0-9_]+$/.test(r.pseudo)||(o.pseudo="Le nom d'utilisateur ne peut contenir que des lettres, chiffres et _",a=!1):(o.pseudo="Le nom d'utilisateur est requis",a=!1),r.password?r.password.length<8?(o.password="Le mot de passe doit contenir au moins 8 caractères",a=!1):x.value<2&&(o.password="Le mot de passe est trop faible",a=!1):(o.password="Le mot de passe est requis",a=!1),r.confirmPassword?r.password!==r.confirmPassword&&(o.confirmPassword="Les mots de passe ne correspondent pas",a=!1):(o.confirmPassword="Veuillez confirmer votre mot de passe",a=!1),r.acceptTerms||(o.acceptTerms="Vous devez accepter les conditions d'utilisation",a=!1),a},N=async()=>{if(I()){f.value=!0,y.value="";try{await T.register({email:r.email,pseudo:r.pseudo,password:r.password,confirmPassword:r.confirmPassword}),await L("/")}catch(a){y.value=a.message||"Une erreur est survenue lors de l'inscription"}finally{f.value=!1}}},U=a=>{a.target.style.display="none"};return(a,e)=>{const h=O,v=G("Icon");return d(),l("div",X,[t("div",Y,[t("div",null,[t("div",ee,[t("img",{src:W,alt:"Anime-Kun",class:"h-12 w-12",onError:U},null,32)]),e[9]||(e[9]=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"}," Créer votre compte ",-1)),t("p",te,[e[8]||(e[8]=u(" Ou ",-1)),m(h,{to:"/login",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300"},{default:k(()=>e[7]||(e[7]=[u(" connectez-vous à votre compte existant ",-1)])),_:1,__:[7]})])]),t("form",{class:"mt-8 space-y-6",onSubmit:Z(N,["prevent"])},[t("div",se,[t("div",null,[e[10]||(e[10]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Adresse email ",-1)),w(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=n=>s(r).email=n),name:"email",type:"email",autocomplete:"email",required:"",class:p(["form-input",{"border-red-500":s(o).email}]),placeholder:"votre@email.com"},null,2),[[A,s(r).email]]),s(o).email?(d(),l("p",re,i(s(o).email),1)):c("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"pseudo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Nom d'utilisateur ",-1)),w(t("input",{id:"pseudo","onUpdate:modelValue":e[1]||(e[1]=n=>s(r).pseudo=n),name:"pseudo",type:"text",autocomplete:"username",required:"",class:p(["form-input",{"border-red-500":s(o).pseudo}]),placeholder:"Votre pseudo"},null,2),[[A,s(r).pseudo]]),s(o).pseudo?(d(),l("p",oe,i(s(o).pseudo),1)):c("",!0),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 3-20 caractères, lettres, chiffres et _ uniquement ",-1))]),t("div",null,[e[13]||(e[13]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Mot de passe ",-1)),t("div",ae,[w(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=n=>s(r).password=n),name:"password",type:s(b)?"text":"password",autocomplete:"new-password",required:"",class:p(["form-input pr-10",{"border-red-500":s(o).password}]),placeholder:"Votre mot de passe"},null,10,ne),[[z,s(r).password]]),t("button",{type:"button",onClick:e[3]||(e[3]=n=>b.value=!s(b)),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[m(v,{name:s(b)?"heroicons:eye-slash":"heroicons:eye",class:"h-5 w-5 text-gray-400"},null,8,["name"])])]),s(o).password?(d(),l("p",de,i(s(o).password),1)):c("",!0),t("div",le,[t("div",ie,[(d(),l($,null,H(4,n=>t("div",{key:n,class:p(["h-1 flex-1 rounded",M(n)])},null,2)),64))]),t("p",ue,i(S()),1)])]),t("div",null,[e[14]||(e[14]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Confirmer le mot de passe ",-1)),t("div",me,[w(t("input",{id:"confirmPassword","onUpdate:modelValue":e[4]||(e[4]=n=>s(r).confirmPassword=n),name:"confirmPassword",type:s(g)?"text":"password",autocomplete:"new-password",required:"",class:p(["form-input pr-10",{"border-red-500":s(o).confirmPassword}]),placeholder:"Confirmez votre mot de passe"},null,10,ce),[[z,s(r).confirmPassword]]),t("button",{type:"button",onClick:e[5]||(e[5]=n=>g.value=!s(g)),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[m(v,{name:s(g)?"heroicons:eye-slash":"heroicons:eye",class:"h-5 w-5 text-gray-400"},null,8,["name"])])]),s(o).confirmPassword?(d(),l("p",pe,i(s(o).confirmPassword),1)):c("",!0)])]),t("div",fe,[t("div",xe,[w(t("input",{id:"terms","onUpdate:modelValue":e[6]||(e[6]=n=>s(r).acceptTerms=n),name:"terms",type:"checkbox",required:"",class:p(["h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",{"border-red-500":s(o).acceptTerms}])},null,2),[[R,s(r).acceptTerms]])]),t("div",we,[t("label",be,[e[17]||(e[17]=u(" J'accepte les ",-1)),m(h,{to:"/terms",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",target:"_blank"},{default:k(()=>e[15]||(e[15]=[u(" conditions d'utilisation ",-1)])),_:1,__:[15]}),e[18]||(e[18]=u(" et la ",-1)),m(h,{to:"/privacy",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",target:"_blank"},{default:k(()=>e[16]||(e[16]=[u(" politique de confidentialité ",-1)])),_:1,__:[16]})]),s(o).acceptTerms?(d(),l("p",ge,i(s(o).acceptTerms),1)):c("",!0)])]),s(y)?(d(),l("div",ye,[t("div",ve,[t("div",_e,[m(v,{name:"heroicons:exclamation-triangle",class:"h-5 w-5 text-red-400"})]),t("div",he,[e[19]||(e[19]=t("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Erreur d'inscription ",-1)),t("div",ke,i(s(y)),1)])])])):c("",!0),t("div",null,[t("button",{type:"submit",disabled:s(f)||!s(F),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[t("span",Ce,[s(f)?(d(),l("div",Te)):(d(),J(v,{key:1,name:"heroicons:user-plus",class:"h-5 w-5 text-blue-500 group-hover:text-blue-400"}))]),u(" "+i(s(f)?"Création du compte...":"Créer mon compte"),1)],8,Pe)])],32)])])}}}),Le=Q(Ve,[["__scopeId","data-v-7a2d0413"]]);export{Le as default};
