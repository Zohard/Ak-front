import{f as S,u as j,q as E,s as q,v as L,x as w,g as b,c as u,a as e,d as x,b as l,w as h,y as N,n as g,z as y,A as z,k as s,B as _,t as f,C as A,D as B,m as D,E as I,e as T,r as K,o as i,_ as F}from"./Bes98wj2.js";import{_ as R}from"./CGu50EI3.js";const $={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},G={class:"max-w-md w-full space-y-8"},H={class:"mx-auto h-12 w-12 flex items-center justify-center"},P={class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400"},J={class:"rounded-md shadow-sm space-y-4"},Q={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},W={class:"relative"},X=["type"],Y={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Z={class:"flex items-center justify-between"},ee={class:"flex items-center"},te={class:"text-sm"},se={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-4"},re={class:"flex"},ae={class:"flex-shrink-0"},oe={class:"ml-3"},ne={class:"mt-2 text-sm text-red-700 dark:text-red-300"},le=["disabled"],ie={class:"absolute left-0 inset-y-0 flex items-center pl-3"},de={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},me={class:"mt-6"},ue={class:"mt-6 grid grid-cols-2 gap-3"},ce={type:"button",class:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:""},pe={type:"button",class:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:""},xe=S({__name:"login",setup(fe){j({title:"Connexion - Anime-Kun V2",meta:[{name:"description",content:"Connectez-vous à votre compte Anime-Kun"}]});const k=E();q();const U=L(),r=w({emailOrUsername:"",password:"",rememberMe:!1}),c=b(!1),d=b(!1),p=b(""),a=w({emailOrUsername:"",password:""}),O=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),C=()=>(a.emailOrUsername="",a.password="",r.emailOrUsername?r.emailOrUsername.includes("@")&&!O(r.emailOrUsername)?(a.emailOrUsername="Format d'email invalide",!1):!r.emailOrUsername.includes("@")&&r.emailOrUsername.length<3?(a.emailOrUsername="Le nom d'utilisateur doit contenir au moins 3 caractères",!1):r.password?r.password.length<6?(a.password="Le mot de passe doit contenir au moins 6 caractères",!1):!0:(a.password="Le mot de passe est requis",!1):(a.emailOrUsername="L'email ou nom d'utilisateur est requis",!1)),V=async()=>{if(C()){d.value=!0,p.value="";try{const o={emailOrUsername:r.emailOrUsername,password:r.password};await k.login(o);const t=U.query.redirect||"/";window.location.replace(t);return}catch(o){p.value=o.message||"Une erreur est survenue lors de la connexion"}finally{d.value=!1}}},M=o=>{o.target.style.display="none"};return(o,t)=>{const v=T,m=K("Icon");return i(),u("div",$,[e("div",G,[e("div",null,[e("div",H,[e("img",{src:R,alt:"Anime-Kun",class:"h-12 w-12",onError:M},null,32)]),t[6]||(t[6]=e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"}," Connexion à votre compte ",-1)),e("p",P,[t[5]||(t[5]=x(" Ou ",-1)),l(v,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300"},{default:h(()=>t[4]||(t[4]=[x(" créez un nouveau compte ",-1)])),_:1,__:[4]})])]),e("form",{class:"mt-8 space-y-6",onSubmit:N(V,["prevent"])},[e("div",J,[e("div",null,[t[7]||(t[7]=e("label",{for:"emailOrUsername",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email ou nom d'utilisateur ",-1)),y(e("input",{id:"emailOrUsername","onUpdate:modelValue":t[0]||(t[0]=n=>s(r).emailOrUsername=n),name:"emailOrUsername",type:"text",autocomplete:"username",required:"",class:_(["form-input",{"border-red-500":s(a).emailOrUsername}]),placeholder:"votre@email.com ou votre nom d'utilisateur"},null,2),[[z,s(r).emailOrUsername]]),s(a).emailOrUsername?(i(),u("p",Q,f(s(a).emailOrUsername),1)):g("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Mot de passe ",-1)),e("div",W,[y(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=n=>s(r).password=n),name:"password",type:s(c)?"text":"password",autocomplete:"current-password",required:"",class:_(["form-input pr-10",{"border-red-500":s(a).password}]),placeholder:"Votre mot de passe"},null,10,X),[[A,s(r).password]]),e("button",{type:"button",onClick:t[2]||(t[2]=n=>c.value=!s(c)),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[l(m,{name:s(c)?"heroicons:eye-slash":"heroicons:eye",class:"h-5 w-5 text-gray-400"},null,8,["name"])])]),s(a).password?(i(),u("p",Y,f(s(a).password),1)):g("",!0)])]),e("div",Z,[e("div",ee,[y(e("input",{id:"remember-me","onUpdate:modelValue":t[3]||(t[3]=n=>s(r).rememberMe=n),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[B,s(r).rememberMe]]),t[9]||(t[9]=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900 dark:text-white"}," Se souvenir de moi ",-1))]),e("div",te,[l(v,{to:"/forgot-password",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300"},{default:h(()=>t[10]||(t[10]=[x(" Mot de passe oublié ? ",-1)])),_:1,__:[10]})])]),s(p)?(i(),u("div",se,[e("div",re,[e("div",ae,[l(m,{name:"heroicons:exclamation-triangle",class:"h-5 w-5 text-red-400"})]),e("div",oe,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Erreur de connexion ",-1)),e("div",ne,f(s(p)),1)])])])):g("",!0),e("div",null,[e("button",{type:"submit",disabled:s(d),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[e("span",ie,[s(d)?(i(),u("div",de)):(i(),D(m,{key:1,name:"heroicons:lock-closed",class:"h-5 w-5 text-blue-500 group-hover:text-blue-400"}))]),x(" "+f(s(d)?"Connexion...":"Se connecter"),1)],8,le)]),e("div",me,[t[14]||(t[14]=I('<div class="relative" data-v-fc83f257><div class="absolute inset-0 flex items-center" data-v-fc83f257><div class="w-full border-t border-gray-300 dark:border-gray-600" data-v-fc83f257></div></div><div class="relative flex justify-center text-sm" data-v-fc83f257><span class="px-2 bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400" data-v-fc83f257> Ou continuez avec </span></div></div>',1)),e("div",ue,[e("button",ce,[t[12]||(t[12]=e("span",{class:"sr-only"},"Se connecter avec Google",-1)),l(m,{name:"heroicons:globe-alt",class:"w-5 h-5"})]),e("button",pe,[t[13]||(t[13]=e("span",{class:"sr-only"},"Se connecter avec Discord",-1)),l(m,{name:"heroicons:chat-bubble-left",class:"w-5 h-5"})])]),t[15]||(t[15]=e("p",{class:"mt-2 text-center text-xs text-gray-500 dark:text-gray-400"}," Connexions sociales disponibles prochainement ",-1))])],32)])])}}}),ve=F(xe,[["__scopeId","data-v-fc83f257"]]);export{ve as default};
