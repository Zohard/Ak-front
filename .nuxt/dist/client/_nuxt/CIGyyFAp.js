import{f as q,u as E,x as k,g as M,H as b,G as g,h as S,c as n,a as r,d as i,b as v,w as T,y as B,n as c,z as w,A as y,k as s,B as p,t as u,D as F,e as I,o as m}from"./Bes98wj2.js";import{u as L}from"./qkSA5X11.js";import"./BJ2ClxiI.js";const N={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},j={class:"max-w-md w-full space-y-8"},D={class:"mt-2 text-center text-sm text-gray-600"},H={class:"space-y-4"},R=["disabled"],W={key:0,class:"mt-1 text-sm text-red-600"},Z=["disabled"],G={key:0,class:"mt-1 text-sm text-red-600"},$=["disabled"],O={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"mt-1 text-xs text-gray-500"},J=["disabled"],K={key:0,class:"mt-1 text-sm text-red-600"},Q={class:"flex items-start"},X={class:"flex items-center h-5"},ee=["disabled"],se={class:"ml-3 text-sm"},re={key:0,class:"mt-1 text-red-600"},te={key:0,class:"rounded-md bg-red-50 p-4"},oe={class:"flex"},ae={class:"ml-3"},le={class:"mt-2 text-sm text-red-700"},de=["disabled"],ne={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},pe=q({__name:"register",setup(ie){E({title:"Create Account - Reviews",meta:[{name:"description",content:"Create a new account to write and share anime and manga reviews."}]});const{register:P,loading:d}=L(),t=k({pseudo:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),a=k({pseudo:"",email:"",password:"",confirmPassword:"",agreeToTerms:""}),f=M(""),_=b(()=>{const o=t.password;if(!o)return 0;let e=0;return o.length>=8&&(e+=1),o.length>=12&&(e+=1),/[a-z]/.test(o)&&(e+=1),/[A-Z]/.test(o)&&(e+=1),/[0-9]/.test(o)&&(e+=1),/[^a-zA-Z0-9]/.test(o)&&(e+=1),Math.min(e,5)}),C=b(()=>{switch(_.value){case 0:case 1:return"Very Weak";case 2:return"Weak";case 3:return"Fair";case 4:return"Good";case 5:return"Strong";default:return"Very Weak"}}),V=b(()=>{switch(_.value){case 0:case 1:return"text-red-600";case 2:return"text-orange-600";case 3:return"text-yellow-600";case 4:return"text-blue-600";case 5:return"text-green-600";default:return"text-red-600"}}),z=b(()=>t.pseudo.length>=3&&t.email.includes("@")&&t.password.length>=8&&t.password===t.confirmPassword&&t.agreeToTerms),x=o=>{a[o]="",f.value=""};g(()=>t.pseudo,()=>x("pseudo")),g(()=>t.email,()=>x("email")),g(()=>t.password,()=>x("password")),g(()=>t.confirmPassword,()=>x("confirmPassword")),g(()=>t.agreeToTerms,()=>x("agreeToTerms"));const A=()=>{let o=!0;return Object.keys(a).forEach(e=>{a[e]=""}),f.value="",t.pseudo?t.pseudo.length<3?(a.pseudo="Username must be at least 3 characters",o=!1):t.pseudo.length>20?(a.pseudo="Username must be 20 characters or less",o=!1):/^[a-zA-Z0-9_-]+$/.test(t.pseudo)||(a.pseudo="Username can only contain letters, numbers, underscores, and hyphens",o=!1):(a.pseudo="Username is required",o=!1),t.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(a.email="Please enter a valid email address",o=!1):(a.email="Email is required",o=!1),t.password?t.password.length<8&&(a.password="Password must be at least 8 characters",o=!1):(a.password="Password is required",o=!1),t.confirmPassword?t.password!==t.confirmPassword&&(a.confirmPassword="Passwords do not match",o=!1):(a.confirmPassword="Please confirm your password",o=!1),t.agreeToTerms||(a.agreeToTerms="You must agree to the terms and conditions",o=!1),o},U=async()=>{if(A())try{const o=await P(t);!o.success&&o.error&&(o.error.field&&o.error.field in a?a[o.error.field]=o.error.message:f.value=o.error.message)}catch(o){f.value=o.message||"An unexpected error occurred"}};return S(()=>{document.getElementById("pseudo")?.focus()}),(o,e)=>{const h=I;return m(),n("div",N,[r("div",j,[r("div",null,[e[7]||(e[7]=r("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Create your account ",-1)),r("p",D,[e[6]||(e[6]=i(" Already have an account? ",-1)),v(h,{to:"/auth/login",class:"font-medium text-blue-600 hover:text-blue-500 transition-colors"},{default:T(()=>e[5]||(e[5]=[i(" Sign in here ",-1)])),_:1,__:[5]})])]),r("form",{class:"mt-8 space-y-6",onSubmit:B(U,["prevent"])},[r("div",H,[r("div",null,[e[8]||(e[8]=r("label",{for:"pseudo",class:"block text-sm font-medium text-gray-700"}," Username ",-1)),w(r("input",{id:"pseudo","onUpdate:modelValue":e[0]||(e[0]=l=>s(t).pseudo=l),name:"pseudo",type:"text",autocomplete:"username",required:"",class:p(["mt-1 appearance-none relative block w-full px-3 py-2 border rounded-md placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",s(a).pseudo?"border-red-300 text-red-900":"border-gray-300"]),placeholder:"Choose a username (3-20 characters)",disabled:s(d)},null,10,R),[[y,s(t).pseudo]]),s(a).pseudo?(m(),n("p",W,u(s(a).pseudo),1)):c("",!0)]),r("div",null,[e[9]||(e[9]=r("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email address ",-1)),w(r("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>s(t).email=l),name:"email",type:"email",autocomplete:"email",required:"",class:p(["mt-1 appearance-none relative block w-full px-3 py-2 border rounded-md placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",s(a).email?"border-red-300 text-red-900":"border-gray-300"]),placeholder:"Enter your email address",disabled:s(d)},null,10,Z),[[y,s(t).email]]),s(a).email?(m(),n("p",G,u(s(a).email),1)):c("",!0)]),r("div",null,[e[11]||(e[11]=r("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),w(r("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=l=>s(t).password=l),name:"password",type:"password",autocomplete:"new-password",required:"",class:p(["mt-1 appearance-none relative block w-full px-3 py-2 border rounded-md placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",s(a).password?"border-red-300 text-red-900":"border-gray-300"]),placeholder:"Choose a strong password (8+ characters)",disabled:s(d)},null,10,$),[[y,s(t).password]]),s(a).password?(m(),n("p",O,u(s(a).password),1)):c("",!0),r("div",Y,[e[10]||(e[10]=i(" Password strength: ",-1)),r("span",{class:p(s(V))},u(s(C)),3)])]),r("div",null,[e[12]||(e[12]=r("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"}," Confirm Password ",-1)),w(r("input",{id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=l=>s(t).confirmPassword=l),name:"confirmPassword",type:"password",autocomplete:"new-password",required:"",class:p(["mt-1 appearance-none relative block w-full px-3 py-2 border rounded-md placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",s(a).confirmPassword?"border-red-300 text-red-900":"border-gray-300"]),placeholder:"Confirm your password",disabled:s(d)},null,10,J),[[y,s(t).confirmPassword]]),s(a).confirmPassword?(m(),n("p",K,u(s(a).confirmPassword),1)):c("",!0)])]),r("div",Q,[r("div",X,[w(r("input",{id:"agreeToTerms","onUpdate:modelValue":e[4]||(e[4]=l=>s(t).agreeToTerms=l),name:"agreeToTerms",type:"checkbox",required:"",class:p(["h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",s(a).agreeToTerms?"border-red-300":""]),disabled:s(d)},null,10,ee),[[F,s(t).agreeToTerms]])]),r("div",se,[r("label",{for:"agreeToTerms",class:p(s(a).agreeToTerms?"text-red-600":"text-gray-700")},[e[15]||(e[15]=i(" I agree to the ",-1)),v(h,{to:"/legal/terms",class:"font-medium text-blue-600 hover:text-blue-500 transition-colors",target:"_blank"},{default:T(()=>e[13]||(e[13]=[i(" Terms of Service ",-1)])),_:1,__:[13]}),e[16]||(e[16]=i(" and ",-1)),v(h,{to:"/legal/privacy",class:"font-medium text-blue-600 hover:text-blue-500 transition-colors",target:"_blank"},{default:T(()=>e[14]||(e[14]=[i(" Privacy Policy ",-1)])),_:1,__:[14]})],2),s(a).agreeToTerms?(m(),n("p",re,u(s(a).agreeToTerms),1)):c("",!0)])]),s(f)?(m(),n("div",te,[r("div",oe,[e[18]||(e[18]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),r("div",ae,[e[17]||(e[17]=r("h3",{class:"text-sm font-medium text-red-800"}," Registration Failed ",-1)),r("div",le,u(s(f)),1)])])])):c("",!0),r("div",null,[r("button",{type:"submit",disabled:s(d)||!s(z),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[s(d)?(m(),n("span",ne,e[19]||(e[19]=[r("svg",{class:"h-5 w-5 text-blue-300 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),i(" "+u(s(d)?"Creating account...":"Create account"),1)],8,de)])],32)])])}}});export{pe as default};
