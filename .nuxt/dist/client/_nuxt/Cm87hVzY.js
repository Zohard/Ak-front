import{f as E,q as U,s as V,g as I,h as j,c as r,a,k as u,b as l,n as g,t as i,B as N,p as h,v as $,r as z,o as s,_ as A}from"./Bes98wj2.js";import{u as M}from"./DzvRhcSF.js";const R={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow duration-200 group"},S={class:"relative aspect-w-3 aspect-h-4"},B=["src","alt"],D={key:1,class:"w-full h-48 bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},q={class:"p-4"},F={class:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"},K={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3"},T={key:0},L={key:1,class:"flex items-center space-x-1"},P={class:"truncate max-w-24"},G={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3"},H={key:0,class:"flex items-center space-x-1"},J={key:1,class:"truncate max-w-24"},O={key:0,class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3 mb-4"},Q={class:"flex items-center justify-between"},W={class:"flex items-center space-x-2"},X=E({__name:"MangaCard",props:{manga:{}},emits:["view"],setup(p,{emit:y}){const n=p,v=y,d=U(),{getImageUrl:b}=M(),f=V(),c=I(!1),w=e=>`/manga/${e.niceUrl||k(e.titre)}-${e.id}`,k=e=>e.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[ç]/g,"c").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),m=async()=>{console.log("View button clicked for manga:",n.manga);const e=w(n.manga);console.log("Navigating to:",e);try{await h(e),console.log("Navigation completed")}catch(o){console.error("Navigation error:",o);try{await f.push(e),console.log("Router.push completed")}catch(t){console.error("Router.push error:",t),window.location.href=e}}v("view",n.manga)},x=e=>{const o=e.target;o.style.display="none";const t=o.parentElement?.querySelector(".placeholder");t&&(t.style.display="flex")},_=async()=>{if(!d.isAuthenticated){h("/login?redirect="+encodeURIComponent($().fullPath));return}try{c.value=!c.value}catch(e){console.error("Error toggling favorite:",e)}},C=async()=>{const e=`${window.location.origin}/mangas/${n.manga.id}`,o=`Découvrez ${n.manga.titre} sur Anime-Kun`;if(navigator.share)try{await navigator.share({title:o,text:n.manga.synopsis||"Découvrez ce manga sur Anime-Kun",url:e})}catch{}else try{await navigator.clipboard.writeText(e)}catch(t){console.error("Error copying to clipboard:",t)}};return j(async()=>{d.isAuthenticated}),(e,o)=>{const t=z("Icon");return s(),r("div",R,[a("div",S,[e.manga.image?(s(),r("img",{key:0,src:u(b)(e.manga.image,"manga"),alt:e.manga.titre,class:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200",onError:x,loading:"lazy"},null,40,B)):(s(),r("div",D,[l(t,{name:"heroicons:book-open",class:"w-12 h-12 text-gray-400"})])),a("div",{class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center"},[a("button",{onClick:m,class:"bg-white text-gray-900 px-6 py-2.5 rounded-full font-medium hover:bg-gray-100 transition-colors transform translate-y-2 group-hover:translate-y-0"}," Voir les détails ")])]),a("div",q,[a("h3",F,i(e.manga.titre),1),a("div",K,[e.manga.annee?(s(),r("span",T,i(e.manga.annee),1)):g("",!0),e.manga.auteur?(s(),r("span",L,[l(t,{name:"heroicons:user",class:"w-3 h-3"}),a("span",P,i(e.manga.auteur),1)])):g("",!0)]),a("div",G,[e.manga.nbVolumes?(s(),r("span",H,[l(t,{name:"heroicons:book-open",class:"w-3 h-3"}),a("span",null,i(e.manga.nbVolumes)+" vol.",1)])):g("",!0),e.manga.editeur?(s(),r("span",J,i(e.manga.editeur),1)):g("",!0)]),e.manga.synopsis?(s(),r("p",O,i(e.manga.synopsis),1)):g("",!0),a("div",Q,[a("button",{onClick:m,class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium transition-colors"}," En savoir plus "),a("div",W,[a("button",{onClick:_,class:N(["p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",{"text-red-500":u(c),"text-gray-400":!u(c)}])},[l(t,{name:u(c)?"heroicons:heart-solid":"heroicons:heart",class:"w-5 h-5"},null,8,["name"])],2),a("button",{onClick:C,class:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[l(t,{name:"heroicons:share",class:"w-5 h-5"})])])])])])}}}),ee=A(X,[["__scopeId","data-v-f74d4099"]]);export{ee as default};
