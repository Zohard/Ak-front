import{f as D,u as p,v as E,g as h,h as C,G as $,c as r,k as n,a as e,b as l,t as d,E as R,n as m,d as b,w as L,j as V,e as N,r as S,o as i,_ as j}from"./Bes98wj2.js";const A={class:"business-detail-page"},F={key:0,class:"flex items-center justify-center py-12"},U={key:1,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-4 mb-8"},O={class:"flex"},q={class:"ml-3"},K={class:"mt-2 text-sm text-red-700 dark:text-red-300"},M={key:2,class:"max-w-6xl mx-auto"},T={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8"},z={class:"md:flex"},G={class:"md:w-1/3"},H={class:"aspect-w-3 aspect-h-4 bg-gray-200 dark:bg-gray-700"},W=["src","alt"],J={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-700"},P={class:"md:w-2/3 p-6"},Q={class:"flex items-start justify-between"},X={class:"flex-1"},Y={class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"},Z={key:0,class:"mb-4"},ee={class:"text-sm text-gray-600 dark:text-gray-400"},se={class:"flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4"},te={key:0,class:"flex items-center"},ae={class:"capitalize"},ne={key:1,class:"flex items-center"},oe={key:2,class:"flex items-center"},re={class:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4"},ie={class:"flex items-center"},le={class:"flex items-center"},de={key:1,class:"mb-4"},ce=["href"],me={key:0,class:"mt-6"},ue={class:"prose prose-gray dark:prose-invert max-w-none"},ge={class:"text-gray-700 dark:text-gray-300 leading-relaxed"},xe={key:3,class:"text-center py-12"},he={class:"mt-6"},be=D({__name:"[slug]",setup(_e){p({title:"Détails Business - Anime-Kun V2"});const _=E(),y=_.params.slug,t=h(null),u=h(!0),c=h(""),g=V(),f=a=>{console.log("Extracting ID from slug:",a);const s=a.match(/-(\d+)$/),o=s?parseInt(s[1]):null;return console.log("Extracted ID:",o),o},x=async()=>{try{u.value=!0,c.value="";const a=f(y);if(!a){c.value="ID business invalide dans l'URL";return}console.log("Loading business with ID:",a);const s=await $fetch(`/api/business/${a}`,{baseURL:g.public.apiBase});console.log("Business API response:",s),s&&(s.data||s.idBusiness)?(t.value=s.data||s,t.value?.denomination&&p({title:`${t.value.denomination} - Anime-Kun V2`,meta:[{name:"description",content:t.value.notes||`Informations sur ${t.value.denomination}`}]}),await v(a)):c.value="Entité business introuvable"}catch(a){console.error("Error loading business:",a),c.value=a.message||"Erreur lors du chargement de l'entité business"}finally{u.value=!1}},v=async a=>{try{await $fetch(`/api/business/${a}/clicks`,{method:"POST",baseURL:g.public.apiBase,query:{type:"day"}})}catch(s){console.warn("Failed to increment business clicks:",s)}},k=a=>a.startsWith("http")?a:`${g.public.apiBase}/media/business/${a}`,w=a=>{a.target.style.display="none"},I=a=>{try{return new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}catch{return a}};return C(()=>{x()}),$(()=>_.params.slug,a=>{a&&x()}),(a,s)=>{const o=S("Icon"),B=N;return i(),r("div",A,[n(u)?(i(),r("div",F,s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"},null,-1),e("span",{class:"ml-3 text-gray-600 dark:text-gray-300"},"Chargement des détails...",-1)]))):n(c)?(i(),r("div",U,[e("div",O,[l(o,{name:"heroicons:exclamation-triangle",class:"h-5 w-5 text-red-400"}),e("div",q,[s[1]||(s[1]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Erreur de chargement ",-1)),e("div",K,d(n(c)),1),e("div",{class:"mt-4"},[e("button",{onClick:x,class:"btn-primary"}," Réessayer ")])])])])):n(t)?(i(),r("div",M,[e("div",T,[e("div",z,[e("div",G,[e("div",H,[n(t).image?(i(),r("img",{key:0,src:k(n(t).image),alt:n(t).denomination||"Business",class:"w-full h-full object-cover",onError:w},null,40,W)):(i(),r("div",J,[l(o,{name:"heroicons:building-office",class:"w-16 h-16 text-gray-400"})]))])]),e("div",P,[e("div",Q,[e("div",X,[e("h1",Y,d(n(t).denomination||"Sans nom"),1),n(t).autresDenominations?(i(),r("div",Z,[e("p",ee,[s[2]||(s[2]=e("span",{class:"font-medium"},"Autres dénominations:",-1)),b(" "+d(n(t).autresDenominations),1)])])):m("",!0),e("div",se,[n(t).type?(i(),r("div",te,[l(o,{name:"heroicons:tag",class:"w-4 h-4 mr-1"}),e("span",ae,d(n(t).type),1)])):m("",!0),n(t).origine?(i(),r("div",ne,[l(o,{name:"heroicons:globe-alt",class:"w-4 h-4 mr-1"}),e("span",null,d(n(t).origine),1)])):m("",!0),n(t).date?(i(),r("div",oe,[l(o,{name:"heroicons:calendar",class:"w-4 h-4 mr-1"}),e("span",null,d(I(n(t).date)),1)])):m("",!0)]),e("div",re,[e("div",ie,[l(o,{name:"heroicons:eye",class:"w-4 h-4 mr-1"}),e("span",null,d(n(t).nbClics||0)+" vues",1)]),e("div",le,[l(o,{name:"heroicons:link",class:"w-4 h-4 mr-1"}),e("span",null,d(n(t).relations||0)+" relations",1)])]),n(t).siteOfficiel?(i(),r("div",de,[e("a",{href:n(t).siteOfficiel,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},[l(o,{name:"heroicons:globe-alt",class:"w-4 h-4 mr-1"}),s[3]||(s[3]=b(" Site officiel ",-1)),l(o,{name:"heroicons:arrow-top-right-on-square",class:"w-3 h-3 ml-1"})],8,ce)])):m("",!0)])]),n(t).notes?(i(),r("div",me,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"}," Description ",-1)),e("div",ue,[e("p",ge,d(n(t).notes),1)])])):m("",!0)])])]),s[5]||(s[5]=R('<div class="grid grid-cols-1 lg:grid-cols-2 gap-8" data-v-9264376c><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6" data-v-9264376c><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4" data-v-9264376c> Animes associés </h3><p class="text-gray-500 dark:text-gray-400 text-center py-8" data-v-9264376c> Fonctionnalité à venir... </p></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6" data-v-9264376c><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4" data-v-9264376c> Mangas associés </h3><p class="text-gray-500 dark:text-gray-400 text-center py-8" data-v-9264376c> Fonctionnalité à venir... </p></div></div>',1))])):(i(),r("div",xe,[l(o,{name:"heroicons:building-office",class:"mx-auto h-12 w-12 text-gray-400"}),s[7]||(s[7]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"}," Entité business introuvable ",-1)),s[8]||(s[8]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," L'entité business demandée n'existe pas ou a été supprimée. ",-1)),e("div",he,[l(B,{to:"/business",class:"btn-primary"},{default:L(()=>s[6]||(s[6]=[b(" Retourner à la liste ",-1)])),_:1,__:[6]})])]))])}}}),ye=j(be,[["__scopeId","data-v-9264376c"]]);export{ye as default};
