import{g as o,q as f,P as l,j as c}from"./CCeOfYC8.js";function E(){const n=o(!1),t=o(null),s=f(),u=async a=>{n.value=!0,t.value=null;try{const e=c();return await $fetch(`${e.public.apiBase}/api/mangas`,{params:a})}catch(e){throw t.value="Erreur lors du chargement des mangas",console.error("Mangas API Error:",e),e}finally{n.value=!1}},g=async(a,e)=>{n.value=!0,t.value=null;try{const r=c();return await $fetch(`${r.public.apiBase}/api/mangas/${a}`,{params:e})}catch(r){throw t.value="Erreur lors du chargement du manga",console.error("Manga detail API Error:",r),r}finally{n.value=!1}},p=async a=>{n.value=!0,t.value=null;try{return await $fetch("/api/mangas",{method:"POST",body:a,headers:s.getAuthHeaders()})}catch(e){throw t.value="Erreur lors de la création du manga",console.error("Create manga API Error:",e),e}finally{n.value=!1}},i=async(a,e)=>{n.value=!0,t.value=null;try{return await $fetch(`/api/mangas/${a}`,{method:"PATCH",body:e,headers:s.getAuthHeaders()})}catch(r){throw t.value="Erreur lors de la mise à jour",console.error("Update manga API Error:",r),r}finally{n.value=!1}},h=async a=>{n.value=!0,t.value=null;try{await $fetch(`/api/mangas/${a}`,{method:"DELETE",headers:s.getAuthHeaders()})}catch(e){throw t.value="Erreur lors de la suppression",console.error("Delete manga API Error:",e),e}finally{n.value=!1}},m=async(a=10)=>{try{return await $fetch("/api/mangas/top",{params:{limit:a}})}catch(e){return console.error("Error fetching top mangas:",e),[]}},d=async(a,e)=>{try{return await $fetch("/api/mangas/autocomplete",{params:{q:a,...e}})}catch(r){return console.error("Error in manga autocomplete:",r),[]}};return{loading:l(n),error:l(t),fetchMangas:u,fetchMangaById:g,createManga:p,updateManga:i,deleteManga:h,getTopMangas:m,autocompleteManga:d}}export{E as u};
