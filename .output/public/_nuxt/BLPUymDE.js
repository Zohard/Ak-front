import{f as q,v as H,g as m,H as _,u as K,h as P,G,c as l,a as t,n as h,b as c,d as p,t as i,k as a,z as N,K as $,J as V,F as E,l as U,E as J,p as B,r as Z,o as r,m as Q,_ as W}from"./CCeOfYC8.js";import X from"./BRx1ksEp.js";import{u as Y}from"./DbHpr3Ro.js";import"./2MIT5xPl.js";import"./SwZ-OZp_.js";import"./B9jFdIe5.js";const ee={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},te={class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ae={class:"text-center"},oe={class:"text-4xl md:text-5xl font-bold mb-4 flex items-center justify-center gap-4"},ne={key:0,class:"flex flex-wrap justify-center gap-4 text-sm md:text-base"},re={class:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2"},le={class:"font-semibold"},ie={class:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2"},de={class:"font-semibold"},ue={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},pe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ve=["value"],xe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},fe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ge={key:0,class:"mt-4 flex flex-wrap items-center gap-2"},be={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},ye={class:"mt-4 text-sm text-gray-500 dark:text-gray-400"},_e={key:0,class:"flex items-center justify-center py-20"},he={key:1,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-6 mb-8"},ke={class:"flex items-center"},we={class:"mt-2 text-red-700 dark:text-red-300"},Ae={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6"},Se={key:3,class:"text-center py-20"},Ce={class:"text-xl font-medium text-gray-900 dark:text-white mb-2"},Ne={class:"text-gray-500 dark:text-gray-400 mb-6"},$e={key:0,class:"space-x-4"},Ve=q({__name:"saison-anime-[season]-[year]-[id]",setup(Fe){const F=H(),{season:Re,year:Te,id:b}=F.params,d=m(null),k=m([]),w=m([]),A=m(!0),y=m(""),v=m(parseInt(b)),u=m(""),x=m("titre"),{formatSeasonUrl:I}=Y(),S={1:"hiver",2:"printemps",3:"été",4:"automne"},R=_(()=>{if(!d.value)return"Saison Anime";const s=S[d.value.saison];return s?`Les animes ${s==="printemps"?"du ":"de l'"}${s} ${d.value.annee}`:"Saison Anime"}),O=_(()=>k.value.length),f=_(()=>{let s=[...k.value];return u.value&&(s=s.filter(e=>e.format===u.value)),s.sort((e,o)=>{switch(x.value){case"titre":return e.titre.localeCompare(o.titre);case"moyenneNotes":return(o.moyenneNotes||0)-(e.moyenneNotes||0);case"nbReviews":return(o.nbReviews||0)-(e.nbReviews||0);case"dateAjout":return new Date(o.dateAjout||0).getTime()-new Date(e.dateAjout||0).getTime();default:return 0}}),s}),g=_(()=>u.value!=="");K({title:()=>`${R.value} - Anime-Kun`,meta:[{name:"description",content:()=>`Découvrez tous les animes de ${d.value?T()+" "+d.value.annee:"cette saison"}. Liste complète avec critiques et notes de la communauté.`}]});const T=()=>d.value&&S[d.value.saison]||"",C=async()=>{try{A.value=!0,y.value="";const[s,e,o]=await Promise.all([$fetch(`/api/seasons/${b}`),$fetch(`/api/seasons/${b}/animes`),$fetch("/api/seasons")]);d.value=s,k.value=e,w.value=o}catch(s){y.value=s.message||"Erreur lors du chargement des données de la saison"}finally{A.value=!1}},z=()=>{const s=w.value.find(e=>e.id_saison===v.value);if(s){const e=I(s);B(e)}},D=()=>{},j=()=>{u.value="",x.value="titre"},L=s=>`${S[s.saison]||""} ${s.annee}`.replace(/^\w/,o=>o.toUpperCase()),M=s=>{B(`/anime/${s.id}`)};return P(()=>{C()}),G(()=>F.params.id,s=>{s&&s!==b&&(v.value=parseInt(s),C())}),(s,e)=>{const o=Z("Icon");return r(),l("div",ee,[t("div",te,[t("div",se,[t("div",ae,[t("h1",oe,[c(o,{name:"heroicons:calendar",class:"w-12 h-12 text-blue-200"}),p(" "+i(a(R)),1)]),e[5]||(e[5]=t("p",{class:"text-xl md:text-2xl mb-6 opacity-90"}," Découvrez tous les animes de cette saison ",-1)),a(d)?(r(),l("div",ne,[t("div",re,[t("span",le,i(a(O)),1),e[4]||(e[4]=p(" animes ",-1))]),t("div",ie,[t("span",de,i(T()),1),p(" "+i(a(d).annee),1)])])):h("",!0)])])]),t("div",ue,[t("div",me,[t("div",ce,[t("div",null,[t("label",pe,[c(o,{name:"heroicons:calendar",class:"w-4 h-4 inline mr-2"}),e[6]||(e[6]=p(" Saison ",-1))]),N(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>V(v)?v.value=n:null),onChange:z,class:"form-input w-full"},[(r(!0),l(E,null,U(a(w),n=>(r(),l("option",{key:n.id_saison,value:n.id_saison},i(L(n)),9,ve))),128))],544),[[$,a(v)]])]),t("div",null,[t("label",xe,[c(o,{name:"heroicons:film",class:"w-4 h-4 inline mr-2"}),e[7]||(e[7]=p(" Format ",-1))]),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>V(u)?u.value=n:null),onChange:D,class:"form-input w-full"},e[8]||(e[8]=[J('<option value="" data-v-3df27340>Tous les formats</option><option value="Série TV" data-v-3df27340>Série TV</option><option value="Film" data-v-3df27340>Film</option><option value="ONA" data-v-3df27340>ONA</option><option value="OAV" data-v-3df27340>OAV</option>',5)]),544),[[$,a(u)]])]),t("div",null,[t("label",fe,[c(o,{name:"heroicons:arrow-up-down",class:"w-4 h-4 inline mr-2"}),e[9]||(e[9]=p(" Trier par ",-1))]),N(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>V(x)?x.value=n:null),onChange:D,class:"form-input w-full"},e[10]||(e[10]=[t("option",{value:"titre"},"Titre (A-Z)",-1),t("option",{value:"moyenneNotes"},"Note moyenne",-1),t("option",{value:"nbReviews"},"Nombre de critiques",-1),t("option",{value:"dateAjout"},"Date d'ajout",-1)]),544),[[$,a(x)]])])]),a(g)?(r(),l("div",ge,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Filtres actifs:",-1)),a(u)?(r(),l("span",be,[p(" Format: "+i(a(u))+" ",1),t("button",{onClick:e[3]||(e[3]=n=>{u.value=""}),class:"ml-2 hover:text-blue-600"},[c(o,{name:"heroicons:x-mark",class:"w-3 h-3"})])])):h("",!0),t("button",{onClick:j,class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"}," Effacer tous les filtres ")])):h("",!0),t("div",ye,i(a(f).length)+" anime"+i(a(f).length>1?"s":"")+" "+i(a(g)?"trouvé"+(a(f).length>1?"s":""):"au total"),1)]),a(A)?(r(),l("div",_e,e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent"},null,-1),t("span",{class:"ml-4 text-lg text-gray-600 dark:text-gray-300"},"Chargement des animes...",-1)]))):a(y)?(r(),l("div",he,[t("div",ke,[c(o,{name:"heroicons:exclamation-triangle",class:"h-6 w-6 text-red-400 mr-3"}),t("div",null,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-red-800 dark:text-red-200"}," Erreur de chargement ",-1)),t("div",we,i(a(y)),1),t("div",{class:"mt-4"},[t("button",{onClick:C,class:"btn-primary"}," Réessayer ")])])])])):a(f).length?(r(),l("div",Ae,[(r(!0),l(E,null,U(a(f),n=>(r(),Q(X,{key:n.id,anime:n,onView:M},null,8,["anime"]))),128))])):(r(),l("div",Se,[c(o,{name:"heroicons:film",class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),t("h3",Ce,i(a(g)?"Aucun anime trouvé":"Aucun anime pour cette saison"),1),t("p",Ne,i(a(g)?"Essayez de modifier vos filtres pour voir plus de résultats.":"Cette saison ne contient pas encore d'animes référencés."),1),a(g)?(r(),l("div",$e,[t("button",{onClick:j,class:"btn-primary"}," Effacer les filtres ")])):h("",!0)]))])])}}}),Oe=W(Ve,[["__scopeId","data-v-3df27340"]]);export{Oe as default};
