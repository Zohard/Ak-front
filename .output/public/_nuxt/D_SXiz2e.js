import{f as ae,v as ie,q as de,g as c,x as q,h as ue,c as n,b as Q,k as s,a as e,t as f,n as A,B as N,y as B,d as h,w as me,z as d,M as F,A as g,K as O,F as S,l as V,J as G,j as ce,e as ge,o as a,_ as be}from"./CCeOfYC8.js";import pe from"./BWQxYHoJ.js";import{u as fe}from"./B7NL00rM.js";import{u as Y}from"./BYwTe9_t.js";import"./CODxxCxq.js";const ye={class:"min-h-screen bg-gray-50"},xe={key:0,class:"flex items-center justify-center min-h-screen"},ve={key:1,class:"flex items-center justify-center min-h-screen"},he={class:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md"},we={class:"flex items-center"},ke={class:"text-red-600 mt-1"},$e={key:2,class:"flex min-h-screen"},_e={class:"w-64 bg-white shadow-lg border-r border-gray-200"},Ae={class:"p-6"},Ee={class:"flex items-center space-x-3 mb-6"},Ce={class:"text-sm text-gray-600"},Ie={class:"space-y-2"},Te={class:"mt-8 pt-6 border-t border-gray-200"},je={key:0,class:"flex-1 p-8"},Be={class:"space-y-6"},Se={class:"bg-white shadow-sm rounded-lg border border-gray-200"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ue=["max"],Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={key:0,class:"text-xs text-gray-500 mt-1"},Ne={class:"flex justify-end pt-6 border-t border-gray-200"},Fe=["disabled"],ze={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"},Me={class:"space-y-6"},Pe={class:"bg-white shadow-sm rounded-lg border border-gray-200"},qe={class:"p-6"},Oe={key:0,class:"text-center py-8"},Ge={key:1,class:"space-y-3 mb-6"},Le={class:"flex items-center space-x-3"},Je={class:"font-medium text-gray-900"},Ke={class:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"},Qe=["onClick"],Ye={class:"border-t border-gray-200 pt-6"},We={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Xe={class:"flex items-end"},Ze=["disabled"],et={class:"space-y-6"},tt={class:"bg-white shadow-sm rounded-lg border border-gray-200"},st={class:"p-6"},rt={key:0,class:"text-center py-8"},ot={key:1,class:"space-y-3 mb-6"},lt={class:"flex items-center space-x-3"},nt={class:"font-medium text-gray-900"},at={key:0,class:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},it=["onClick"],dt={class:"border-t border-gray-200 pt-6"},ut={class:"mb-4"},mt={key:0,class:"mt-3 flex flex-wrap gap-2"},ct=["onClick"],gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bt={class:"flex items-end"},pt=["disabled"],ft={class:"space-y-6"},yt={class:"bg-white shadow-sm rounded-lg border border-gray-200"},xt={class:"p-6"},vt={key:0,class:"text-center py-8"},ht={key:1,class:"mb-6"},wt={class:"flex flex-wrap gap-2"},kt=["onClick"],$t={class:"border-t border-gray-200 pt-6"},_t={class:"mb-4"},At={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3"},Et={class:"md:col-span-2"},Ct={key:0,class:"flex flex-wrap gap-2"},It=["onClick"],Tt={class:"ml-1 text-xs text-blue-600"},jt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Bt={class:"md:col-span-2 flex items-end"},St=["disabled"],w="anime",Vt=ae({__name:"[id]",setup(Ut){const L=ie(),u=ce(),m=de(),{addNotification:i}=fe(),z=c(!0),E=c(!1),U=c(null),b=c("general"),l=c(null),M=c([]),y=q({related_type:"anime",related_id:void 0,relation_type:"related"}),P=c([]),k=c(""),C=c([]),x=q({businessId:void 0,role:""}),I=c([]),v=q({tagId:void 0}),$=c(""),T=c([]),R=c(""),J=async()=>{try{z.value=!0,U.value=null;const o=await $fetch(`${u.public.apiBase}/api/admin/animes/${L.params.id}`,{headers:m.getAuthHeaders()});l.value=o,await _()}catch(o){console.error("Error loading anime:",o),U.value=o?.data?.message||"Erreur lors du chargement de l'anime"}finally{z.value=!1}},_=async()=>{if(l.value)try{const[o,t,p]=await Promise.all([$fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/relationships`,{headers:m.getAuthHeaders()}),$fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/staff`,{headers:m.getAuthHeaders()}),$fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/tags`,{headers:m.getAuthHeaders()})]);M.value=o,P.value=t,I.value=p}catch(o){console.error("Error loading admin extras:",o)}},W=async()=>{try{E.value=!0;const o={titre:l.value.titre,annee:l.value.annee,nbEp:l.value.nbEp,studio:l.value.studio,realisateur:l.value.realisateur,synopsis:l.value.synopsis,image:l.value.image,statut:l.value.statut};await $fetch(`${u.public.apiBase}/api/admin/animes/${l.value.idAnime}`,{method:"PUT",headers:{"Content-Type":"application/json",...m.getAuthHeaders()},body:o}),i("Anime mis à jour avec succès!","success")}catch(o){console.error("Error saving anime:",o),i(o?.data?.message||"Erreur lors de l'enregistrement","error")}finally{E.value=!1}},X=async o=>{const t=o.target.files;if(!t||!t[0])return;const p=new FormData;p.append("file",t[0]),p.append("type","anime"),p.append("relatedId",String(l.value.idAnime));try{const j=await $fetch(`${u.public.apiBase}/api/media/upload`,{method:"POST",body:p,headers:m.getAuthHeaders()});l.value.image=j.filename,i("Image uploadée avec succès!","success")}catch(j){console.error("Upload error:",j),i("Échec de l'upload de l'image","error")}},Z=async()=>{if(!y.related_id){i("Veuillez saisir un ID de contenu","warning");return}try{await $fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/relationships`,{method:"POST",headers:{"Content-Type":"application/json",...m.getAuthHeaders()},body:y}),y.related_id=void 0,y.relation_type="related",await _(),i("Relation ajoutée avec succès!","success")}catch(o){console.error("Error adding relation:",o),i(o?.data?.message||"Erreur lors de l'ajout de la relation","error")}},ee=async o=>{try{await $fetch(`${u.public.apiBase}/api/admin/content/relationships/${o.id_relation}`,{method:"DELETE",headers:m.getAuthHeaders()}),await _(),i("Relation supprimée avec succès!","success")}catch(t){console.error("Error deleting relation:",t),i("Erreur lors de la suppression de la relation","error")}},K=Y(async()=>{if(!k.value){C.value=[];return}try{const o=await $fetch(`${u.public.apiBase}/api/admin/business`,{params:{search:k.value,page:1,limit:10},headers:m.getAuthHeaders()});C.value=o.items||[]}catch(o){console.error("Error searching business:",o)}},400),te=o=>{x.businessId=o.idBusiness,k.value=o.denomination},se=async()=>{if(!x.businessId){i("Veuillez sélectionner un business","warning");return}try{await $fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/staff`,{method:"POST",headers:{"Content-Type":"application/json",...m.getAuthHeaders()},body:x}),x.businessId=void 0,x.role="",k.value="",C.value=[],await _(),i("Staff ajouté avec succès!","success")}catch(o){console.error("Error adding staff:",o),i(o?.data?.message||"Erreur lors de l'ajout du staff","error")}},re=async o=>{try{const t=o.id_business||o.idBusiness;await $fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/staff/${t}`,{method:"DELETE",headers:m.getAuthHeaders()}),await _(),i("Staff retiré avec succès!","success")}catch(t){console.error("Error removing staff:",t),i("Erreur lors de la suppression du staff","error")}},D=Y(async()=>{if(!$.value){T.value=[];return}try{const o=await $fetch(`${u.public.apiBase}/api/admin/content/tags/search`,{params:{q:$.value,limit:10,categorie:R.value||void 0},headers:m.getAuthHeaders()}),t=new Set(I.value.map(p=>p.id));T.value=(o.items||[]).filter(p=>!t.has(p.id))}catch(o){console.error("Error searching tags:",o)}},300),oe=o=>{v.tagId=o.id,$.value=o.name},le=async()=>{if(!v.tagId){i("Veuillez sélectionner un tag","warning");return}if(I.value.some(o=>o.id===v.tagId)){i("Ce tag est déjà associé à cet anime","warning");return}try{await $fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/tags`,{method:"POST",headers:{"Content-Type":"application/json",...m.getAuthHeaders()},body:v}),v.tagId=void 0,$.value="",T.value=[],await _(),i("Tag ajouté avec succès!","success")}catch(o){console.error("Error adding tag:",o),i(o?.data?.message||"Erreur lors de l'ajout du tag","error")}},ne=async o=>{try{await $fetch(`${u.public.apiBase}/api/admin/content/${w}/${l.value.idAnime}/tags/${o.id}`,{method:"DELETE",headers:m.getAuthHeaders()}),await _(),i("Tag supprimé avec succès!","success")}catch(t){console.error("Error removing tag:",t),i("Erreur lors de la suppression du tag","error")}};return ue(()=>{J()}),(o,t)=>{const p=ge,j=pe;return a(),n("div",ye,[s(z)?(a(),n("div",xe,t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):s(U)?(a(),n("div",ve,[e("div",he,[e("div",we,[t[25]||(t[25]=e("div",{class:"text-red-500 mr-3"},"⚠️",-1)),e("div",null,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-red-800"},"Erreur de chargement",-1)),e("p",ke,f(s(U)),1),e("button",{onClick:J,class:"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"}," Réessayer ")])])])])):(a(),n("div",$e,[e("aside",_e,[e("div",Ae,[e("div",Ee,[t[27]||(t[27]=e("div",{class:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-semibold"},"📺")],-1)),e("div",null,[t[26]||(t[26]=e("h1",{class:"text-lg font-semibold text-gray-900"},"Anime Admin",-1)),e("p",Ce,"ID: "+f(s(l)?.idAnime||s(L).params.id),1)])]),e("nav",Ie,[e("a",{href:"#general",onClick:t[0]||(t[0]=B(r=>b.value="general",["prevent"])),class:N(["flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",s(b)==="general"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"])},t[28]||(t[28]=[e("span",{class:"mr-3"},"📋",-1),h(" Informations générales ",-1)]),2),e("a",{href:"#relations",onClick:t[1]||(t[1]=B(r=>b.value="relations",["prevent"])),class:N(["flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",s(b)==="relations"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"])},t[29]||(t[29]=[e("span",{class:"mr-3"},"🔗",-1),h(" Relations ",-1)]),2),e("a",{href:"#staff",onClick:t[2]||(t[2]=B(r=>b.value="staff",["prevent"])),class:N(["flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",s(b)==="staff"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"])},t[30]||(t[30]=[e("span",{class:"mr-3"},"👥",-1),h(" Staff ",-1)]),2),e("a",{href:"#tags",onClick:t[3]||(t[3]=B(r=>b.value="tags",["prevent"])),class:N(["flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",s(b)==="tags"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"])},t[31]||(t[31]=[e("span",{class:"mr-3"},"🏷️",-1),h(" Tags ",-1)]),2)]),e("div",Te,[Q(p,{to:"/admin/animes",class:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors"},{default:me(()=>t[32]||(t[32]=[h(" ← Retour à la liste ",-1)])),_:1,__:[32]})])])]),s(l)?(a(),n("main",je,[d(e("div",Be,[e("div",Se,[t[43]||(t[43]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Informations générales"),e("p",{class:"text-sm text-gray-600 mt-1"},"Modifier les détails de base de l'anime")],-1)),e("form",{onSubmit:B(W,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s(l).titre=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Titre de l'anime"},null,512),[[g,s(l).titre]])]),e("div",Ve,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Année",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>s(l).annee=r),type:"number",min:"1900",max:new Date().getFullYear()+5,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"2024"},null,8,Ue),[[g,s(l).annee,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nombre d'épisodes",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s(l).nbEp=r),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"12"},null,512),[[g,s(l).nbEp,void 0,{number:!0}]])])]),e("div",Re,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Studio",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s(l).studio=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Studio d'animation"},null,512),[[g,s(l).studio]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Réalisateur",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s(l).realisateur=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Nom du réalisateur"},null,512),[[g,s(l).realisateur]])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Synopsis",-1)),d(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=r=>s(l).synopsis=r),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 placeholder-gray-500 resize-vertical",placeholder:"Description de l'anime..."},null,512),[[g,s(l).synopsis]])]),e("div",De,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[10]||(t[10]=r=>s(l).statut=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900"},t[39]||(t[39]=[e("option",{value:1},"Affichée",-1),e("option",{value:2},"En attente",-1),e("option",{value:0},"Bloquée",-1)]),512),[[O,s(l).statut,void 0,{number:!0}]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),e("input",{type:"file",accept:"image/*",onChange:X,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white text-gray-900 file:mr-4 file:py-1 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),s(l).image?(a(),n("p",He,"Fichier actuel: "+f(s(l).image),1)):A("",!0)])]),e("div",Ne,[e("button",{type:"submit",disabled:s(E),class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[s(E)?(a(),n("span",ze,t[42]||(t[42]=[e("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0),h(" "+f(s(E)?"Enregistrement...":"Enregistrer les modifications"),1)],8,Fe)])],32)])],512),[[F,s(b)==="general"]]),d(e("div",Me,[e("div",Pe,[t[51]||(t[51]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Relations"),e("p",{class:"text-sm text-gray-600 mt-1"},"Gérer les relations avec d'autres contenus")],-1)),e("div",qe,[s(M).length===0?(a(),n("div",Oe,t[44]||(t[44]=[e("div",{class:"text-gray-400 text-6xl mb-4"},"🔗",-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune relation",-1),e("p",{class:"text-gray-600"},"Cet anime n'a pas encore de relations définies.",-1)]))):(a(),n("div",Ge,[(a(!0),n(S,null,V(s(M),r=>(a(),n("div",{key:r.id_relation,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},[e("div",Le,[t[45]||(t[45]=e("div",{class:"w-2 h-2 bg-blue-400 rounded-full"},null,-1)),e("div",null,[e("span",Je,f(r.related_title||"—"),1),e("span",Ke,f(r.typeRelation||"related"),1)])]),e("button",{onClick:H=>ee(r),class:"inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-md transition-colors"}," Supprimer ",8,Qe)]))),128))])),e("div",Ye,[t[50]||(t[50]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Ajouter une relation",-1)),e("div",We,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de contenu",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=r=>s(y).related_type=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"},t[46]||(t[46]=[e("option",{value:"anime"},"Anime",-1),e("option",{value:"manga"},"Manga",-1)]),512),[[O,s(y).related_type]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ID du contenu",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s(y).related_id=r),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"123"},null,512),[[g,s(y).related_id,void 0,{number:!0}]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de relation",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s(y).relation_type=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"sequel, prequel, related..."},null,512),[[g,s(y).relation_type]])]),e("div",Xe,[e("button",{onClick:Z,disabled:!s(y).related_id,class:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Ajouter ",8,Ze)])])])])])],512),[[F,s(b)==="relations"]]),d(e("div",et,[e("div",tt,[t[58]||(t[58]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Staff & Business"),e("p",{class:"text-sm text-gray-600 mt-1"},"Gérer les associations avec les studios et entreprises")],-1)),e("div",st,[s(P).length===0?(a(),n("div",rt,t[52]||(t[52]=[e("div",{class:"text-gray-400 text-6xl mb-4"},"👥",-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun staff",-1),e("p",{class:"text-gray-600"},"Aucune association business n'est définie pour cet anime.",-1)]))):(a(),n("div",ot,[(a(!0),n(S,null,V(s(P),r=>(a(),n("div",{key:r.id_relation||r.id_business,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},[e("div",lt,[t[53]||(t[53]=e("div",{class:"w-2 h-2 bg-green-400 rounded-full"},null,-1)),e("div",null,[e("span",nt,f(r.nom),1),r.type?(a(),n("span",at,f(r.type),1)):A("",!0)])]),e("button",{onClick:H=>re(r),class:"inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-md transition-colors"}," Retirer ",8,it)]))),128))])),e("div",dt,[t[57]||(t[57]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Ajouter un business",-1)),e("div",ut,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher un business",-1)),d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>G(k)?k.value=r:null),type:"text",onInput:t[15]||(t[15]=(...r)=>s(K)&&s(K)(...r)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"Nom du studio, éditeur..."},null,544),[[g,s(k)]]),s(C).length?(a(),n("div",mt,[(a(!0),n(S,null,V(s(C),r=>(a(),n("button",{key:r.idBusiness,onClick:H=>te(r),class:"inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-md transition-colors"},f(r.denomination),9,ct))),128))])):A("",!0)]),e("div",gt,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Business ID",-1)),d(e("input",{"onUpdate:modelValue":t[16]||(t[16]=r=>s(x).businessId=r),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"ID"},null,512),[[g,s(x).businessId,void 0,{number:!0}]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle (optionnel)",-1)),d(e("input",{"onUpdate:modelValue":t[17]||(t[17]=r=>s(x).role=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"Studio, Producer..."},null,512),[[g,s(x).role]])]),e("div",bt,[e("button",{onClick:se,disabled:!s(x).businessId,class:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Ajouter ",8,pt)])])])])])],512),[[F,s(b)==="staff"]]),d(e("div",ft,[e("div",yt,[t[65]||(t[65]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Tags"),e("p",{class:"text-sm text-gray-600 mt-1"},"Gérer les tags et catégories de l'anime")],-1)),e("div",xt,[s(I).length===0?(a(),n("div",vt,t[59]||(t[59]=[e("div",{class:"text-gray-400 text-6xl mb-4"},"🏷️",-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun tag",-1),e("p",{class:"text-gray-600"},"Aucun tag n'est associé à cet anime.",-1)]))):(a(),n("div",ht,[e("div",wt,[(a(!0),n(S,null,V(s(I),r=>(a(),n("span",{key:r.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"},[h(f(r.nom)+" ",1),e("button",{onClick:H=>ne(r),class:"ml-2 text-blue-600 hover:text-blue-800 transition-colors",title:"Supprimer ce tag"}," ✕ ",8,kt)]))),128))])])),e("div",$t,[t[64]||(t[64]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Ajouter un tag",-1)),e("div",_t,[e("div",At,[e("div",Et,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher un tag",-1)),d(e("input",{"onUpdate:modelValue":t[18]||(t[18]=r=>G($)?$.value=r:null),type:"text",onInput:t[19]||(t[19]=(...r)=>s(D)&&s(D)(...r)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"Nom du tag..."},null,544),[[g,s($)]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),d(e("select",{"onUpdate:modelValue":t[20]||(t[20]=r=>G(R)?R.value=r:null),onChange:t[21]||(t[21]=(...r)=>s(D)&&s(D)(...r)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"},t[61]||(t[61]=[e("option",{value:""},"Toutes les catégories",-1),e("option",{value:"Genre"},"Genre",-1),e("option",{value:"Thème"},"Thème",-1)]),544),[[O,s(R)]])])]),s(T).length?(a(),n("div",Ct,[(a(!0),n(S,null,V(s(T),r=>(a(),n("button",{key:r.id,onClick:H=>oe(r),class:"inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-md transition-colors"},[h(f(r.name)+" ",1),e("span",Tt,"("+f(r.categorie)+")",1)],8,It))),128))])):A("",!0)]),e("div",jt,[e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tag ID",-1)),d(e("input",{"onUpdate:modelValue":t[22]||(t[22]=r=>s(v).tagId=r),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500",placeholder:"ID du tag"},null,512),[[g,s(v).tagId,void 0,{number:!0}]])]),e("div",Bt,[e("button",{onClick:le,disabled:!s(v).tagId,class:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Ajouter le tag ",8,St)])])])])])],512),[[F,s(b)==="tags"]])])):A("",!0)])),Q(j)])}}}),zt=be(Vt,[["__scopeId","data-v-510df3e7"]]);export{zt as default};
