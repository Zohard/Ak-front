import{f as z,v as L,g as m,x as G,H as K,X as H,h as Q,G as X,c as d,n as x,k as r,a as e,b as i,t as n,w as N,z as _,A as J,K as U,F as W,l as Y,D as Z,p as j,e as ee,r as q,o as c,d as F,u as te,_ as re}from"./Bes98wj2.js";import{u as se}from"./BUcUzH0k.js";import{u as ae}from"./DKV7c2p8.js";const oe={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},le={key:0,class:"flex items-center justify-center py-12"},ie={key:1,class:"container mx-auto px-4 py-8"},ne={class:"rounded-md bg-red-50 dark:bg-red-900/20 p-4"},de={class:"flex"},ce={class:"ml-3"},ue={class:"mt-2 text-sm text-red-700 dark:text-red-300"},me={class:"mt-4 space-x-3"},xe={key:2},ge={class:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},pe={class:"max-w-7xl mx-auto px-6 md:px-8 lg:px-12 py-4"},ye={class:"flex items-center space-x-2 text-sm"},he={class:"text-gray-900 dark:text-white font-medium"},be={class:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-16"},fe={class:"max-w-7xl mx-auto px-6 md:px-8 lg:px-12"},ve={class:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8"},_e={class:"flex-shrink-0"},ke={class:"w-32 h-32 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},we={class:"flex-1 text-center md:text-left"},Ae={class:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-2"},Ce={key:0,class:"text-xl text-gray-600 dark:text-gray-300 mb-4"},Ie={class:"flex flex-wrap items-center justify-center md:justify-start gap-6 text-sm text-gray-600 dark:text-gray-300 mb-6"},Ne={class:"flex items-center space-x-1"},Be={key:0,class:"flex items-center space-x-1"},Ve={key:1,class:"flex items-center space-x-1"},Ee={key:1,class:"max-w-2xl"},Oe={class:"text-gray-700 dark:text-gray-300 leading-relaxed"},Te={key:2,class:"mt-4 flex flex-wrap items-center justify-center md:justify-start gap-4 text-sm text-gray-500 dark:text-gray-400"},De={key:0,class:"flex items-center space-x-1"},Se={key:1,class:"flex items-center space-x-1"},Ue=["href"],je={class:"max-w-7xl mx-auto px-6 md:px-8 lg:px-12 py-12"},qe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Pe={class:"relative"},$e=["value"],Me={class:"mt-4 flex flex-wrap items-center justify-between gap-4"},Re={class:"flex items-center space-x-4"},ze={class:"flex items-center space-x-2"},Le={class:"text-sm text-gray-500 dark:text-gray-400"},Ge={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Ke={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 text-center"},He={class:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2"},Qe={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 text-center"},Xe={class:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2"},Je={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 text-center"},We={class:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2"},Ye=z({__name:"[id]",setup(Ze){const k=L(),p=parseInt(k.params.id),o=m(null),B=m([]),V=m([]),b=m(!0),w=m(!1),y=m(""),f=m(0),E=m(0),O=m(0),T=m(),a=G({page:1,limit:12,search:"",categoryId:void 0,sortBy:"date",sortOrder:"desc"}),A=se(),v=K(()=>!!(a.search||a.categoryId||a.sortBy!=="date")),C=async()=>{try{b.value=!0,y.value="";const s=await A.fetchArticlesByAuthor(p,{limit:1});if(s.articles.length>0&&s.articles[0].author)o.value=s.articles[0].author;else throw new Error("Auteur non trouvé");await Promise.allSettled([I(),P()])}catch(s){y.value="Auteur non trouvé",console.error("Error loading author:",s)}finally{b.value=!1}},I=async()=>{try{w.value=!0;const s=await A.fetchArticlesByAuthor(p,{...a,sortOrder:a.sortOrder==="desc"?"desc":"asc"});B.value=s.articles,T.value=s.pagination,f.value=s.pagination.totalItems;const t=new Map;s.articles.forEach(l=>{l.categories&&l.categories.forEach(g=>{t.has(g.id)||t.set(g.id,g)})}),V.value=Array.from(t.values())}catch(s){console.error("Error loading author articles:",s)}finally{w.value=!1}},P=async()=>{try{const s=await A.fetchArticlesByAuthor(p,{limit:1e3});E.value=s.articles.reduce((t,l)=>t+l.nbClics,0),O.value=s.articles.reduce((t,l)=>t+(l.commentCount||0),0)}catch(s){console.error("Error loading author statistics:",s)}},h=()=>{a.page=1,I();const s={};a.search&&(s.search=a.search),a.categoryId&&(s.category=a.categoryId.toString()),a.sortBy!=="date"&&(s.sort=a.sortBy),a.sortOrder!=="desc"&&(s.order=a.sortOrder),j({query:s},{replace:!0})},D=ae(()=>{h()},500),S=()=>{a.search="",a.categoryId=void 0,a.sortBy="date",a.sortOrder="desc",h()},$=s=>{a.page=s,I(),window.scrollTo({top:0,behavior:"smooth"})},M=s=>{j(`/articles/${s.niceUrl}`)};return H(()=>{o.value&&te({title:`${o.value.memberName} - Auteur - Anime-Kun V2`,meta:[{name:"description",content:`Découvrez tous les articles écrits par ${o.value.memberName} sur Anime-Kun V2`},{name:"keywords",content:`${o.value.memberName}, auteur, articles, anime, manga`},{property:"og:title",content:`${o.value.memberName} - Auteur`},{property:"og:description",content:`Découvrez tous les articles écrits par ${o.value.memberName}`},{property:"og:type",content:"profile"}]})}),Q(()=>{if(isNaN(p)){y.value="ID auteur invalide",b.value=!1;return}const s=k.query;s.search&&(a.search=s.search),s.category&&(a.categoryId=parseInt(s.category)),s.sort&&(a.sortBy=s.sort),s.order&&(a.sortOrder=s.order),s.page&&(a.page=parseInt(s.page)||1),C()}),X(()=>k.params.id,s=>{const t=parseInt(s);!isNaN(t)&&t!==p&&C()}),(s,t)=>{const l=q("Icon"),g=ee,R=q("ArticleCardGrid");return c(),d("div",oe,[r(b)?(c(),d("div",le,t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"},null,-1),e("span",{class:"ml-3 text-gray-600 dark:text-gray-300"},"Chargement du profil auteur...",-1)]))):r(y)?(c(),d("div",ie,[e("div",ne,[e("div",de,[i(l,{name:"heroicons:exclamation-triangle",class:"h-5 w-5 text-red-400"}),e("div",ce,[t[7]||(t[7]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Auteur non trouvé ",-1)),e("div",ue,n(r(y)),1),e("div",me,[i(g,{to:"/articles",class:"btn-primary"},{default:N(()=>t[6]||(t[6]=[F(" Retour aux articles ",-1)])),_:1,__:[6]}),e("button",{onClick:C,class:"btn-secondary"}," Réessayer ")])])])])])):r(o)?(c(),d("div",xe,[e("nav",ge,[e("div",pe,[e("ol",ye,[e("li",null,[i(g,{to:"/",class:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200"},{default:N(()=>[i(l,{name:"heroicons:home",class:"w-4 h-4"})]),_:1})]),e("li",null,[i(l,{name:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"})]),e("li",null,[i(g,{to:"/articles",class:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200"},{default:N(()=>t[8]||(t[8]=[F(" Articles ",-1)])),_:1,__:[8]})]),e("li",null,[i(l,{name:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"})]),e("li",null,[e("span",he,n(r(o).memberName),1)])])])]),e("header",be,[e("div",fe,[e("div",ve,[e("div",_e,[e("div",ke,[i(l,{name:"heroicons:user",class:"w-16 h-16 text-gray-500 dark:text-gray-400"})])]),e("div",we,[e("h1",Ae,n(r(o).memberName),1),r(o).realName&&r(o).realName!==r(o).memberName?(c(),d("p",Ce,n(r(o).realName),1)):x("",!0),e("div",Ie,[e("div",Ne,[i(l,{name:"heroicons:document-text",class:"w-4 h-4"}),e("span",null,n(r(f))+" articles",1)]),r(o).nbCritiques?(c(),d("div",Be,[i(l,{name:"heroicons:star",class:"w-4 h-4"}),e("span",null,n(r(o).nbCritiques)+" critiques",1)])):x("",!0),r(o).experience?(c(),d("div",Ve,[i(l,{name:"heroicons:trophy",class:"w-4 h-4"}),e("span",null,n(r(o).experience)+" exp",1)])):x("",!0)]),r(o).personalText?(c(),d("div",Ee,[e("p",Oe,n(r(o).personalText),1)])):x("",!0),r(o).location||r(o).websiteUrl?(c(),d("div",Te,[r(o).location?(c(),d("div",De,[i(l,{name:"heroicons:map-pin",class:"w-4 h-4"}),e("span",null,n(r(o).location),1)])):x("",!0),r(o).websiteUrl?(c(),d("div",Se,[i(l,{name:"heroicons:link",class:"w-4 h-4"}),e("a",{href:r(o).websiteUrl,target:"_blank",rel:"noopener noreferrer",class:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200"},n(r(o).websiteTitle||"Site web"),9,Ue)])):x("",!0)])):x("",!0)])])])]),e("main",je,[e("div",qe,[e("div",Fe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Rechercher dans les articles de cet auteur ",-1)),e("div",Pe,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>r(a).search=u),type:"text",placeholder:"Rechercher un article...",class:"form-input pl-10",onInput:t[1]||(t[1]=(...u)=>r(D)&&r(D)(...u))},null,544),[[J,r(a).search]]),i(l,{name:"heroicons:magnifying-glass",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Catégorie ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=u=>r(a).categoryId=u),class:"form-input",onChange:h},[t[10]||(t[10]=e("option",{value:""},"Toutes les catégories",-1)),(c(!0),d(W,null,Y(r(V),u=>(c(),d("option",{key:u.id,value:u.id},n(u.name),9,$e))),128))],544),[[U,r(a).categoryId]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Trier par ",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>r(a).sortBy=u),class:"form-input",onChange:h},t[12]||(t[12]=[e("option",{value:"date"},"Date de publication",-1),e("option",{value:"titre"},"Titre",-1),e("option",{value:"nbClics"},"Popularité",-1),e("option",{value:"commentCount"},"Commentaires",-1)]),544),[[U,r(a).sortBy]])])]),e("div",Me,[e("div",Re,[e("div",ze,[_(e("input",{id:"sortOrder","onUpdate:modelValue":t[4]||(t[4]=u=>r(a).sortOrder=u),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:h},null,544),[[Z,r(a).sortOrder]]),t[14]||(t[14]=e("label",{for:"sortOrder",class:"text-sm text-gray-700 dark:text-gray-300"}," Ordre décroissant ",-1))]),r(v)?(c(),d("button",{key:0,onClick:S,class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200"}," Effacer les filtres ")):x("",!0)]),e("div",Le,n(r(f))+" articles trouvés ",1)])]),e("div",Ge,[e("div",Ke,[e("div",He,n(r(f)),1),t[15]||(t[15]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"}," Articles publiés ",-1))]),e("div",Qe,[e("div",Xe,n(r(E).toLocaleString()),1),t[16]||(t[16]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"}," Vues totales ",-1))]),e("div",Je,[e("div",We,n(r(O)),1),t[17]||(t[17]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"}," Commentaires reçus ",-1))])]),i(R,{articles:r(B),loading:r(w),pagination:r(T),"empty-title":r(v)?"Aucun article trouvé":"Aucun article publié","empty-message":r(v)?"Essayez de modifier vos filtres de recherche.":"Cet auteur n'a pas encore publié d'articles.","show-empty-action":r(v),"empty-action-text":"Effacer les filtres","grid-cols":"auto",gap:"lg",onArticleView:M,onPageChange:$,onEmptyAction:S},null,8,["articles","loading","pagination","empty-title","empty-message","show-empty-action"])])])):x("",!0)])}}}),st=re(Ye,[["__scopeId","data-v-f7fc8b60"]]);export{st as default};
