import{f as g,s as x,q as v,x as y,c as m,a as e,z as n,A as i,k as o,K as w,n as k,t as V,b as S,w as C,y as U,j as A,e as N,o as p,d as T,_ as B}from"./CCeOfYC8.js";const D={class:"main-content max-w-3xl"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"grid grid-cols-1 md-grid-cols-2 gap-4 items-end"},I={key:0,class:"text-xs text-gray-500 mt-1"},M={class:"flex gap-3"},j=g({__name:"create",setup(q){const d=A(),f=x(),u=v(),s=y({denomination:"",statut:1}),b=async a=>{const t=a.target.files;if(!t||!t[0])return;const r=new FormData;r.append("file",t[0]),r.append("type","cover");try{const l=await $fetch(`${d.public.apiBase}/api/media/upload`,{method:"POST",body:r,headers:u.getAuthHeaders()});s.image=l.filename}catch(l){console.error("Upload error",l),alert("Échec de l'upload")}},c=async()=>{try{await $fetch(`${d.public.apiBase}/api/admin/business`,{method:"POST",headers:{"Content-Type":"application/json",...u.getAuthHeaders()},body:s}),f.push("/admin/business")}catch(a){console.error(a),alert(a?.data?.message||"Erreur lors de la création")}};return(a,t)=>{const r=N;return p(),m("div",D,[t[18]||(t[18]=e("h1",{class:"section-title mb-4"},"Créer une fiche business",-1)),e("form",{class:"card p-5 space-y-4",onSubmit:U(c,["prevent"])},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm mb-1"},"Dénomination *",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).denomination=l),class:"form-input w-full",required:""},null,512),[[i,o(s).denomination]])]),e("div",O,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm mb-1"},"Type",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).type=l),class:"form-input w-full",placeholder:"Studio, Éditeur, ..."},null,512),[[i,o(s).type]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm mb-1"},"Origine",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).origine=l),class:"form-input w-full"},null,512),[[i,o(s).origine]])])]),e("div",$,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm mb-1"},"Site officiel",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).siteOfficiel=l),class:"form-input w-full",placeholder:"https://..."},null,512),[[i,o(s).siteOfficiel]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm mb-1"},"Date",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).date=l),class:"form-input w-full",placeholder:"Libre (ex: 1998)"},null,512),[[i,o(s).date]])])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm mb-1"},"Notes",-1)),n(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).notes=l),rows:"4",class:"form-input w-full"},null,512),[[i,o(s).notes]])]),e("div",F,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm mb-1"},"Statut",-1)),n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).statut=l),class:"form-input w-full"},t[13]||(t[13]=[e("option",{value:1},"Actif",-1),e("option",{value:0},"Inactif",-1)]),512),[[w,o(s).statut,void 0,{number:!0}]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm mb-1"},"Image (upload)",-1)),e("input",{type:"file",accept:"image/*",onChange:b},null,32),o(s).image?(p(),m("div",I,"Fichier: "+V(o(s).image),1)):k("",!0)])]),e("div",M,[t[17]||(t[17]=e("button",{type:"submit",class:"btn-primary"},"Créer",-1)),S(r,{to:"/admin/business",class:"btn-secondary"},{default:C(()=>t[16]||(t[16]=[T("Annuler",-1)])),_:1,__:[16]})])],32)])}}}),H=B(j,[["__scopeId","data-v-7f637c10"]]);export{H as default};
