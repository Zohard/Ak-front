import{g as o,q as E,P as u,j as g}from"./Bes98wj2.js";function P(){const r=o(!1),a=o(null),c=E(),s=g(),n=async t=>{r.value=!0,a.value=null;try{return await $fetch("/api/proxy/articles",{params:t})}catch(e){throw a.value="Erreur lors du chargement des articles",console.error("Articles API Error:",e),e}finally{r.value=!1}},i=async t=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles/${t}`)}catch(e){throw a.value="Erreur lors du chargement de l'article",console.error("Article detail API Error:",e),e}finally{r.value=!1}},h=async t=>{r.value=!0,a.value=null;try{return await $fetch(`/api/proxy/articles/slug/${t}`)}catch(e){throw a.value="Erreur lors du chargement de l'article",console.error("Article by slug API Error:",e),e}finally{r.value=!1}},p=async(t=5)=>{r.value=!0,a.value=null;try{return await $fetch("/api/proxy/articles/featured",{params:{limit:t}})}catch(e){throw a.value="Erreur lors du chargement des articles à la une",console.error("Featured articles API Error:",e),e}finally{r.value=!1}},y=async(t,e)=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles/category/${t}`,{params:e})}catch(l){throw a.value="Erreur lors du chargement des articles par catégorie",console.error("Articles by category API Error:",l),l}finally{r.value=!1}},f=async(t,e)=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles/author/${t}`,{params:e})}catch(l){throw a.value="Erreur lors du chargement des articles par auteur",console.error("Articles by author API Error:",l),l}finally{r.value=!1}},d=async(t,e)=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles/search`,{params:{q:t,...e}})}catch(l){throw a.value="Erreur lors de la recherche d'articles",console.error("Article search API Error:",l),l}finally{r.value=!1}},v=async t=>{try{await $fetch(`${s.public.apiBase}/api/articles/${t}/view`,{method:"POST"})}catch(e){console.error("Track article view API Error:",e)}},A=async t=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles`,{method:"POST",body:t,headers:c.getAuthHeaders()})}catch(e){throw a.value="Erreur lors de la création de l'article",console.error("Create article API Error:",e),e}finally{r.value=!1}},$=async(t,e)=>{r.value=!0,a.value=null;try{return await $fetch(`${s.public.apiBase}/api/articles/${t}`,{method:"PUT",body:e,headers:c.getAuthHeaders()})}catch(l){throw a.value="Erreur lors de la mise à jour de l'article",console.error("Update article API Error:",l),l}finally{r.value=!1}},w=async t=>{r.value=!0,a.value=null;try{await $fetch(`${s.public.apiBase}/api/articles/${t}`,{method:"DELETE",headers:c.getAuthHeaders()})}catch(e){throw a.value="Erreur lors de la suppression de l'article",console.error("Delete article API Error:",e),e}finally{r.value=!1}};return{loading:u(r),error:u(a),fetchArticles:n,fetchArticleById:i,fetchArticleBySlug:h,fetchFeaturedArticles:p,fetchArticlesByCategory:y,fetchArticlesByAuthor:f,searchArticles:d,trackArticleView:v,createArticle:A,updateArticle:$,deleteArticle:w}}export{P as u};
