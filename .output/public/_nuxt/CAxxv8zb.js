import{u as S}from"./DzvRhcSF.js";import{f as L,g as f,H as y,h as M,L as R,Y as H,c as l,a as n,n as u,k as m,b as k,N as E,r as w,o as c,_ as T}from"./Bes98wj2.js";/* empty css        */const N={class:"article-content max-w-none"},U=["innerHTML"],D={key:0,class:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"},V={key:1,class:"mt-6 text-center"},Y={key:2,class:"fixed top-0 left-0 w-full h-1 bg-gray-200 dark:bg-gray-700 z-50"},j=L({__name:"ArticleContent",props:{article:{},showSocialSharing:{type:Boolean,default:!0},showPrintButton:{type:Boolean,default:!0},showReadingProgress:{type:Boolean,default:!0},baseImageUrl:{default:""}},emits:["contentProcessed","imageClick"],setup(x,{emit:v}){const o=x,b=v,{getArticleImageUrl:d}=S(),g=f(),p=f(0),$=y(()=>window.location.href),h=y(()=>{if(!o.article.contenu)return"";let e=o.article.contenu;return e=_(e),e=A(e),e=B(e),e=I(e),e=q(e),e}),_=e=>{if(e=e.replace(/\[img\]([^\[]*)\[\/img\]/gi,(r,i)=>{const a=i.trim(),s=d(a)||a;return`<img src="${s}" alt="Article image" class="article-image mx-auto rounded-lg shadow-md cursor-pointer" onclick="openImageModal('${s}', 'Article image')" loading="lazy" />`}),o.article.imgunebig){const r=d(o.article.imgunebig)||o.article.imgunebig;e=e.replace(/\{imgunebig\}/gi,`<img src="${r}" alt="Article image" class="article-image mx-auto rounded-lg shadow-md cursor-pointer" onclick="openImageModal('${r}', 'Article image')" loading="lazy" />`)}if(o.article.imgunebig2){const r=d(o.article.imgunebig2)||o.article.imgunebig2;e=e.replace(/\{imgunebig2\}/gi,`<img src="${r}" alt="Article image" class="article-image mx-auto rounded-lg shadow-md cursor-pointer" onclick="openImageModal('${r}', 'Article image')" loading="lazy" />`)}return e},A=e=>(e=e.replace(/\[b\](.*?)\[\/b\]/gi,"<strong>$1</strong>"),e=e.replace(/\[i\](.*?)\[\/i\]/gi,"<em>$1</em>"),e=e.replace(/\[u\](.*?)\[\/u\]/gi,"<u>$1</u>"),e=e.replace(/\[size=(\d+)\](.*?)\[\/size\]/gi,'<span style="font-size: $1px">$2</span>'),e=e.replace(/\[color=([^\]]+)\](.*?)\[\/color\]/gi,'<span style="color: $1">$2</span>'),e=e.replace(/\[quote\](.*?)\[\/quote\]/gi,'<blockquote class="border-l-4 border-gray-300 pl-4 italic my-4">$1</blockquote>'),e=e.replace(/\[quote=([^\]]+)\](.*?)\[\/quote\]/gi,'<blockquote class="border-l-4 border-gray-300 pl-4 italic my-4"><cite class="font-semibold">$1 :</cite><br>$2</blockquote>'),e=e.replace(/\[code\](.*?)\[\/code\]/gi,'<pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/\[list\](.*?)\[\/list\]/gi,'<ul class="list-disc list-inside my-4">$1</ul>'),e=e.replace(/\[\*\](.*?)(?=\[\*\]|\[\/list\])/gi,"<li>$1</li>"),e),I=e=>{e=e.replace(/\[url=([^\]]+)\]([^\[]*)\[\/url\]/gi,'<a href="$1" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$2</a>'),e=e.replace(/\[url\]([^\[]*)\[\/url\]/gi,'<a href="$1" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>');const r=/(https?:\/\/[^\s<>]+)/gi;return e=e.replace(r,'<a href="$1" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>'),e},B=e=>(e=e.replace(/\r\n/g,"<br>"),e=e.replace(/\n/g,"<br>"),e=e.replace(/\[br\]/gi,"<br>"),e),q=e=>(e=e.replace(/<script[^>]*>.*?<\/script>/gi,""),e=e.replace(/javascript:/gi,""),e=e.replace(/on\w+\s*=/gi,""),e),z=()=>{const e=`
    <html>
      <head>
        <title>${o.article.titre}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
          h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
          .article-meta { color: #666; font-size: 14px; margin-bottom: 20px; }
          img { max-width: 100%; height: auto; margin: 20px 0; }
          blockquote { border-left: 4px solid #ccc; padding-left: 20px; margin: 20px 0; }
          pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <h1>${o.article.titre}</h1>
        <div class="article-meta">
          <p>Par ${o.article.author?.memberName||"Auteur"} - ${C(o.article.date)}</p>
        </div>
        <div>${h.value}</div>
      </body>
    </html>
  `,r=window.open("","_blank");r&&(r.document.write(e),r.document.close(),r.focus(),r.print(),r.close())},C=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",t=()=>{if(!g.value)return;const e=g.value,r=window.innerHeight;document.documentElement.scrollHeight;const i=window.scrollY,a=e.offsetTop,s=e.offsetHeight;if(i>=a){const P=Math.min((i-a+r)/s*100,100);p.value=Math.max(0,P)}else p.value=0};return window.openImageModal=(e,r)=>{b("imageClick",e,r)},M(()=>{o.showReadingProgress&&(window.addEventListener("scroll",t),window.addEventListener("resize",t),t()),R(()=>{b("contentProcessed")})}),H(()=>{o.showReadingProgress&&(window.removeEventListener("scroll",t),window.removeEventListener("resize",t))}),(e,r)=>{const i=w("ArticleSocialShare"),a=w("Icon");return c(),l("article",N,[n("div",{ref_key:"contentRef",ref:g,class:"prose prose-lg dark:prose-invert max-w-none prose-headings:font-bold prose-headings:text-gray-900 dark:prose-headings:text-white prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-strong:text-gray-900 dark:prose-strong:text-white prose-code:text-blue-600 dark:prose-code:text-blue-400 prose-code:bg-gray-100 dark:prose-code:bg-gray-800 prose-pre:bg-gray-100 dark:prose-pre:bg-gray-800 prose-blockquote:border-blue-500 prose-blockquote:bg-blue-50 dark:prose-blockquote:bg-blue-900/20",innerHTML:m(h)},null,8,U),e.showSocialSharing?(c(),l("div",D,[k(i,{title:e.article.titre,url:m($),description:e.article.metaDescription},null,8,["title","url","description"])])):u("",!0),e.showPrintButton?(c(),l("div",V,[n("button",{onClick:z,class:"inline-flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[k(a,{name:"heroicons:printer",class:"w-4 h-4"}),r[0]||(r[0]=n("span",null,"Imprimer l'article",-1))])])):u("",!0),e.showReadingProgress?(c(),l("div",Y,[n("div",{class:"h-full bg-blue-600 transition-all duration-150 ease-out",style:E({width:`${m(p)}%`})},null,4)])):u("",!0)])}}}),J=T(j,[["__scopeId","data-v-8d2193fa"]]);export{J as default};
