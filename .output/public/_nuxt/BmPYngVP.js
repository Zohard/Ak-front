import z from"./D4rjCY6Q.js";import{f as j,u as q,g as d,x as $,H as I,h as H,G,c as l,a as t,n as B,b,d as V,z as v,A as K,k as s,K as f,F as k,l as h,D as L,t as u,J as Y,r as J,o as n,m as W,B as X,v as Z,p as Q,_ as ee}from"./CCeOfYC8.js";import{u as te}from"./C-EV01kC.js";import{u as se}from"./BYwTe9_t.js";import"./B9jFdIe5.js";const ae={class:"main-content"},oe={class:"page-header"},re={class:"section-title flex items-center gap-3"},ne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ie=["value"],de=["value"],ue={class:"mt-4 flex flex-wrap items-center gap-4"},ce={class:"flex items-center space-x-2"},me={class:"text-sm text-gray-500 dark:text-gray-400"},ge={key:0,class:"flex items-center justify-center py-12"},pe={key:1,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-4 mb-8"},ve={class:"flex"},xe={class:"ml-3"},ye={class:"mt-2 text-sm text-red-700 dark:text-red-300"},be={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},fe={key:3,class:"text-center py-12"},ke={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},he={key:0,class:"mt-6"},Ce={key:4,class:"mt-8 flex items-center justify-between"},_e={class:"flex items-center space-x-2"},we={class:"text-sm text-gray-700 dark:text-gray-300"},Me={class:"flex items-center space-x-2"},Pe=["disabled"],Ae={class:"flex items-center space-x-1"},Be=["onClick"],Ve=["disabled"],Te=j({__name:"mangas",setup(Oe){q({title:"Mangas - Anime-Kun",meta:[{name:"description",content:"Découvrez notre collection de mangas avec critiques et notes de la communauté"}]});const C=d([]),T=d(!0),_=d(""),w=d(0),i=d(1),m=d(1),x=d(12),N=d(["Action","Aventure","Comédie","Drame","Fantastique","Horreur","Romance","Science-fiction","Slice of Life","Thriller"]),O=d([]),r=$({search:"",genre:"",year:"",sortBy:"titre",sortOrder:!1}),S=new Date().getFullYear();for(let o=S;o>=1960;o--)O.value.push(o.toString());const M=I(()=>r.search||r.genre||r.year||r.sortBy!=="titre"),E=I(()=>{const o=[],e=Math.max(1,i.value-2),c=Math.min(m.value,i.value+2);for(let y=e;y<=c;y++)o.push(y);return o}),P=te(),g=async()=>{try{const o=await P.fetchMangas({page:i.value,limit:x.value,search:r.search||void 0,genre:r.genre||void 0,annee:r.year||void 0,sortBy:r.sortBy,sortOrder:r.sortOrder?"desc":"asc"});C.value=o.mangas||o.data||[],w.value=o.pagination?.total||o.meta?.total||0,m.value=o.pagination?.totalPages||o.meta?.totalPages||Math.ceil(w.value/x.value)}catch{_.value=P.error.value||"Erreur lors du chargement des mangas"}T.value=P.loading.value},p=()=>{i.value=1,g()},D=se(()=>{p()},500),F=()=>{r.search="",r.genre="",r.year="",r.sortBy="titre",r.sortOrder=!1,p()},A=o=>{o>=1&&o<=m.value&&(i.value=o,g(),window.scrollTo({top:0,behavior:"smooth"}))},R=()=>{i.value=1,g()},U=o=>{Q(`/mangas/${o.id}`)};return H(()=>{g()}),G(()=>Z().query,o=>{o.page&&(i.value=parseInt(o.page)||1),o.search&&(r.search=o.search),o.genre&&(r.genre=o.genre),g()},{immediate:!1}),(o,e)=>{const c=J("Icon"),y=z;return n(),l("div",ae,[t("div",oe,[t("h1",re,[b(c,{name:"heroicons:book-open",class:"w-8 h-8 text-blue-600 dark:text-blue-400"}),e[9]||(e[9]=V(" Mangas ",-1))]),e[10]||(e[10]=t("p",{class:"text-lg text-gray-600 dark:text-gray-300"}," Découvrez notre collection de mangas avec critiques et notes de la communauté ",-1))]),t("div",ne,[t("div",le,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Recherche ",-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s(r).search=a),type:"text",placeholder:"Nom du manga...",class:"form-input",onInput:e[1]||(e[1]=(...a)=>s(D)&&s(D)(...a))},null,544),[[K,s(r).search]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Genre ",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s(r).genre=a),class:"form-input",onChange:p},[e[12]||(e[12]=t("option",{value:""},"Tous les genres",-1)),(n(!0),l(k,null,h(s(N),a=>(n(),l("option",{key:a,value:a},u(a),9,ie))),128))],544),[[f,s(r).genre]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Année ",-1)),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s(r).year=a),class:"form-input",onChange:p},[e[14]||(e[14]=t("option",{value:""},"Toutes les années",-1)),(n(!0),l(k,null,h(s(O),a=>(n(),l("option",{key:a,value:a},u(a),9,de))),128))],544),[[f,s(r).year]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Trier par ",-1)),v(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>s(r).sortBy=a),class:"form-input",onChange:p},e[16]||(e[16]=[t("option",{value:"titre"},"Titre",-1),t("option",{value:"annee"},"Année",-1),t("option",{value:"moyenneNotes"},"Note moyenne",-1),t("option",{value:"dateAjout"},"Récemment ajouté",-1)]),544),[[f,s(r).sortBy]])])]),t("div",ue,[t("div",ce,[v(t("input",{id:"sortOrder","onUpdate:modelValue":e[5]||(e[5]=a=>s(r).sortOrder=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:p},null,544),[[L,s(r).sortOrder]]),e[18]||(e[18]=t("label",{for:"sortOrder",class:"text-sm text-gray-700 dark:text-gray-300"}," Ordre décroissant ",-1))]),t("div",me,u(s(w))+" mangas trouvés ",1),s(M)?(n(),l("button",{key:0,onClick:F,class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"}," Effacer les filtres ")):B("",!0)])]),s(T)?(n(),l("div",ge,e[19]||(e[19]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"},null,-1),t("span",{class:"ml-3 text-gray-600 dark:text-gray-300"},"Chargement des mangas...",-1)]))):s(_)?(n(),l("div",pe,[t("div",ve,[b(c,{name:"heroicons:exclamation-triangle",class:"h-5 w-5 text-red-400"}),t("div",xe,[e[20]||(e[20]=t("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Erreur de chargement ",-1)),t("div",ye,u(s(_)),1),t("div",{class:"mt-4"},[t("button",{onClick:g,class:"btn-primary"}," Réessayer ")])])])])):s(C).length?(n(),l("div",be,[(n(!0),l(k,null,h(s(C),a=>(n(),W(y,{key:a.id,manga:a,onView:U},null,8,["manga"]))),128))])):(n(),l("div",fe,[b(c,{name:"heroicons:book-open",class:"mx-auto h-12 w-12 text-gray-400"}),e[21]||(e[21]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"}," Aucun manga trouvé ",-1)),t("p",ke,u(s(M)?"Essayez de modifier vos filtres.":"Aucun manga disponible pour le moment."),1),s(M)?(n(),l("div",he,[t("button",{onClick:F,class:"btn-primary"}," Effacer les filtres ")])):B("",!0)])),s(m)>1?(n(),l("div",Ce,[t("div",_e,[t("span",we," Page "+u(s(i))+" sur "+u(s(m)),1),v(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>Y(x)?x.value=a:null),class:"form-input w-auto",onChange:R},e[22]||(e[22]=[t("option",{value:"12"},"12 par page",-1),t("option",{value:"24"},"24 par page",-1),t("option",{value:"48"},"48 par page",-1)]),544),[[f,s(x)]])]),t("div",Me,[t("button",{disabled:s(i)===1,onClick:e[7]||(e[7]=a=>A(s(i)-1)),class:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"},[b(c,{name:"heroicons:chevron-left",class:"w-4 h-4"}),e[23]||(e[23]=V(" Précédent ",-1))],8,Pe),t("div",Ae,[(n(!0),l(k,null,h(s(E),a=>(n(),l("button",{key:a,class:X(["px-3 py-2 text-sm rounded-md transition-colors",a===s(i)?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:De=>A(a)},u(a),11,Be))),128))]),t("button",{disabled:s(i)===s(m),onClick:e[8]||(e[8]=a=>A(s(i)+1)),class:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"},[e[24]||(e[24]=V(" Suivant ",-1)),b(c,{name:"heroicons:chevron-right",class:"w-4 h-4"})],8,Ve)])])):B("",!0)])}}}),Re=ee(Te,[["__scopeId","data-v-f49c0aab"]]);export{Re as default};
