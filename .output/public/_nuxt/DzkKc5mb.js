import{f as N,v as E,q as U,g as f,h as j,c as n,b as k,k as r,a as e,t as b,n as h,w as A,y as S,z as l,A as u,K as $,d as B,j as D,e as T,o as a,_ as I}from"./CCeOfYC8.js";import M from"./BWQxYHoJ.js";import{u as O}from"./B7NL00rM.js";import"./CODxxCxq.js";const z={class:"min-h-screen bg-gray-50"},H={key:0,class:"flex items-center justify-center min-h-screen"},R={key:1,class:"flex items-center justify-center min-h-screen"},q={class:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md"},F={class:"flex items-center"},P={class:"text-red-600 mt-1"},K={key:2,class:"flex min-h-screen"},L={class:"w-64 bg-white shadow-lg border-r border-gray-200"},G={class:"p-6"},J={class:"flex items-center space-x-3 mb-6"},Q={class:"text-sm text-gray-600"},W={class:"mt-8 pt-6 border-t border-gray-200"},X={key:0,class:"flex-1 p-8"},Y={class:"space-y-6"},Z={class:"bg-white shadow-sm rounded-lg border border-gray-200"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={key:0,class:"text-xs text-gray-500 mt-1"},oe={class:"flex justify-end pt-6 border-t border-gray-200"},ie=["disabled"],ne={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"},le=N({__name:"[id]",setup(ae){const w=E(),y=D(),x=U(),{addNotification:g}=O(),v=f(!0),m=f(!1),p=f(null),s=f(null),_=async()=>{try{v.value=!0,p.value=null;const i=await $fetch(`${y.public.apiBase}/api/admin/business/${w.params.id}`,{headers:x.getAuthHeaders()});s.value=i}catch(i){console.error("Error loading business:",i),p.value=i?.data?.message||"Erreur lors du chargement de l'entreprise"}finally{v.value=!1}},V=async i=>{const t=i.target.files;if(!t||!t[0])return;const d=new FormData;d.append("file",t[0]),d.append("type","business"),d.append("relatedId",String(s.value.idBusiness));try{const c=await $fetch(`${y.public.apiBase}/api/media/upload`,{method:"POST",body:d,headers:x.getAuthHeaders()});s.value.image=c.filename,g("Image upload√©e avec succ√®s!","success")}catch(c){console.error("Upload error:",c),g("√âchec de l'upload de l'image","error")}},C=async()=>{try{m.value=!0;const i={denomination:s.value.denomination,type:s.value.type,origine:s.value.origine,siteOfficiel:s.value.siteOfficiel,date:s.value.date,notes:s.value.notes,statut:s.value.statut,image:s.value.image};await $fetch(`${y.public.apiBase}/api/admin/business/${s.value.idBusiness}`,{method:"PUT",headers:{"Content-Type":"application/json",...x.getAuthHeaders()},body:i}),g("Entreprise mise √† jour avec succ√®s!","success")}catch(i){console.error("Error saving business:",i),g(i?.data?.message||"Erreur lors de l'enregistrement","error")}finally{m.value=!1}};return j(()=>{_()}),(i,t)=>{const d=T,c=M;return a(),n("div",z,[r(v)?(a(),n("div",H,t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):r(p)?(a(),n("div",R,[e("div",q,[e("div",F,[t[9]||(t[9]=e("div",{class:"text-red-500 mr-3"},"‚ö†Ô∏è",-1)),e("div",null,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-red-800"},"Erreur de chargement",-1)),e("p",P,b(r(p)),1),e("button",{onClick:_,class:"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"}," R√©essayer ")])])])])):(a(),n("div",K,[e("aside",L,[e("div",G,[e("div",J,[t[11]||(t[11]=e("div",{class:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-semibold"},"üè¢")],-1)),e("div",null,[t[10]||(t[10]=e("h1",{class:"text-lg font-semibold text-gray-900"},"Business Admin",-1)),e("p",Q,"ID: "+b(r(s)?.idBusiness||r(w).params.id),1)])]),e("div",W,[k(d,{to:"/admin/business",class:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors"},{default:A(()=>t[12]||(t[12]=[B(" ‚Üê Retour √† la liste ",-1)])),_:1,__:[12]})])])]),r(s)?(a(),n("main",X,[e("div",Y,[e("div",Z,[t[23]||(t[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Informations g√©n√©rales"),e("p",{class:"text-sm text-gray-600 mt-1"},"Modifier les d√©tails de base de l'entreprise")],-1)),e("form",{onSubmit:S(C,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"D√©nomination *",-1)),l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r(s).denomination=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Nom de l'entreprise"},null,512),[[u,r(s).denomination]])]),e("div",ee,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r(s).type=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Type d'entreprise"},null,512),[[u,r(s).type]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Origine",-1)),l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r(s).origine=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Pays/r√©gion d'origine"},null,512),[[u,r(s).origine]])])]),e("div",te,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Site officiel",-1)),l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r(s).siteOfficiel=o),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"https://..."},null,512),[[u,r(s).siteOfficiel]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date",-1)),l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(s).date=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500",placeholder:"Date de cr√©ation"},null,512),[[u,r(s).date]])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),l(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(s).notes=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 placeholder-gray-500 resize-vertical",placeholder:"Notes et informations compl√©mentaires..."},null,512),[[u,r(s).notes]])]),e("div",se,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),l(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>r(s).statut=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900"},t[19]||(t[19]=[e("option",{value:1},"Affich√©e",-1),e("option",{value:2},"En attente",-1),e("option",{value:0},"Bloqu√©e",-1)]),512),[[$,r(s).statut,void 0,{number:!0}]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),e("input",{type:"file",accept:"image/*",onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white text-gray-900 file:mr-4 file:py-1 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"},null,32),r(s).image?(a(),n("p",re,"Fichier actuel: "+b(r(s).image),1)):h("",!0)])]),e("div",oe,[e("button",{type:"submit",disabled:r(m),class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[r(m)?(a(),n("span",ne,t[22]||(t[22]=[e("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):h("",!0),B(" "+b(r(m)?"Enregistrement...":"Enregistrer les modifications"),1)],8,ie)])],32)])])])):h("",!0)])),k(c)])}}}),ge=I(le,[["__scopeId","data-v-8540bd35"]]);export{ge as default};
